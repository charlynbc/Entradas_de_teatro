__d(function(g,r,i,a,m,e,d){var n=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return(0,S.jsxs)(v.Navigator,{screenOptions:{headerShown:!1},children:[(0,S.jsx)(v.Screen,{name:"ActorTabs",component:T}),(0,S.jsx)(v.Screen,{name:"Manual",component:j.default})]})};n(r(d[1]));var t=r(d[2]),o=r(d[3]),c=r(d[4]),s=n(r(d[5])),l=n(r(d[6])),u=n(r(d[7])),f=n(r(d[8])),p=n(r(d[9])),j=n(r(d[10])),x=n(r(d[11])),S=r(d[12]);const b=(0,t.createBottomTabNavigator)(),v=(0,o.createNativeStackNavigator)(),h={'Mis Entradas':'ticket-outline',Transferir:'swap-horizontal-outline',Historial:'time-outline',Ensayos:'calendar-outline',Perfil:'person-circle-outline'};function T(){return(0,S.jsxs)(b.Navigator,{screenOptions:({route:n})=>({headerShown:!1,tabBarActiveTintColor:x.default.secondary,tabBarInactiveTintColor:x.default.textMuted,tabBarStyle:{backgroundColor:x.default.surface,borderTopColor:x.default.border},tabBarIcon:({color:t,size:o})=>(0,S.jsx)(c.Ionicons,{name:h[n.name],size:o,color:t})}),children:[(0,S.jsx)(b.Screen,{name:"Mis Entradas",component:s.default}),(0,S.jsx)(b.Screen,{name:"Transferir",component:l.default}),(0,S.jsx)(b.Screen,{name:"Ensayos",component:f.default}),(0,S.jsx)(b.Screen,{name:"Historial",component:u.default}),(0,S.jsx)(b.Screen,{name:"Perfil",component:p.default})]})}},757,[1,14,706,475,538,785,790,791,792,743,748,535,352]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=function(){const[e,r]=(0,t.useState)([]),[j,D]=(0,t.useState)(!0),[R,P]=(0,t.useState)(!1),[A,T]=(0,t.useState)('UPDATE'),[B,I]=(0,t.useState)(null),[_,F]=(0,t.useState)(''),[O,z]=(0,t.useState)(''),[W,$]=(0,t.useState)(''),[M,V]=(0,t.useState)(null),[N,q]=(0,t.useState)(''),[H,L]=(0,t.useState)(''),[G,U]=(0,t.useState)('598'),[K,Q]=(0,t.useState)(!1),J=async()=>{D(!0);try{const e=await(0,v.getActorStock)();r(e)}finally{D(!1)}};(0,t.useEffect)(()=>{J()},[]);const X=(e,t)=>{T('UPDATE'),'RESERVADO'===t||'REPORTADA_VENDIDA'===t?(I(e),V(t),q(e.comprador_nombre||''),L(e.comprador_telefono||''),P(!0)):Z(e.id,t)},Y=(e,t)=>{I(e),F(t.obra),z(t.fecha),$(t.lugar),T('SHARE'),L(e.comprador_telefono||''),P(!0)},Z=async(e,t,n={})=>{Q(!0);try{await(0,v.updateTicketStatus)(Object.assign({ticketId:e,estado:t},n)),P(!1),J()}catch(e){s.default.alert('Error',e.message||'No se pudo actualizar')}finally{Q(!1)}};if(j)return(0,k.jsx)(x.default,{scrollable:!1,children:(0,k.jsx)(n.default,{style:C.center,children:(0,k.jsx)(i.default,{color:y.default.secondary})})});return(0,k.jsxs)(x.default,{children:[(0,k.jsx)(w.default,{variant:"card"}),e.map(e=>(0,k.jsx)(h.default,{title:e.obra,subtitle:`${e.tickets.length} entradas \xb7 Vendidas ${e.vendidas} \xb7 Pagadas ${e.pagadas}`,children:e.tickets.map(t=>(0,k.jsxs)(n.default,{style:C.ticketRow,children:[(0,k.jsxs)(n.default,{children:[(0,k.jsx)(o.default,{style:C.ticketCode,children:t.code}),(0,k.jsxs)(o.default,{style:C.meta,children:["Precio $",t.precio]}),(t.comprador_nombre||t.comprador_telefono)&&(0,k.jsxs)(o.default,{style:C.buyerInfo,children:[t.comprador_nombre," ",t.comprador_telefono?`(${t.comprador_telefono})`:'']})]}),(0,k.jsxs)(n.default,{style:C.ticketActions,children:[(0,k.jsx)(b.default,{estado:t.estado}),(0,k.jsxs)(n.default,{style:C.actionsRow,children:['STOCK_VENDEDOR'===t.estado&&(0,k.jsx)(l.default,{onPress:()=>X(t,'RESERVADO'),children:(0,k.jsx)(o.default,{style:C.actionText,children:"Reservar"})}),['STOCK_VENDEDOR','RESERVADO'].includes(t.estado)&&(0,k.jsx)(l.default,{onPress:()=>X(t,'REPORTADA_VENDIDA'),children:(0,k.jsx)(o.default,{style:C.actionText,children:"Vendida"})}),['REPORTADA_VENDIDA','PAGADO'].includes(t.estado)&&(0,k.jsx)(l.default,{onPress:()=>Y(t,e),style:C.iconButton,children:(0,k.jsx)(f.Ionicons,{name:"logo-whatsapp",size:22,color:y.default.success})})]})]})]},t.id))},e.showId)),0===e.length&&(0,k.jsx)(o.default,{style:C.empty,children:"Sin entradas asignadas todav\xeda"}),(0,k.jsx)(c.default,{animationType:"fade",transparent:!0,visible:R,onRequestClose:()=>P(!1),children:(0,k.jsx)(n.default,{style:C.modalOverlay,children:(0,k.jsxs)(n.default,{style:C.modalContent,children:[(0,k.jsx)(o.default,{style:C.modalTitle,children:'SHARE'===A?'Enviar Entrada':'RESERVADO'===M?'Reservar Entrada':'Registrar Venta'}),(0,k.jsx)(o.default,{style:C.modalSubtitle,children:'SHARE'===A?'Se generar\xe1 el PDF oficial para enviar por WhatsApp.':'Opcional: Ingresa los datos del comprador'}),'UPDATE'===A&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(o.default,{style:C.label,children:"Nombre"}),(0,k.jsx)(u.default,{style:C.input,placeholder:"Nombre del comprador",placeholderTextColor:y.default.textSoft,value:N,onChangeText:q})]}),(0,k.jsx)(o.default,{style:C.label,children:"Tel\xe9fono (WhatsApp)"}),(0,k.jsxs)(n.default,{style:C.phoneRow,children:[(0,k.jsx)(n.default,{style:C.pickerContainer,children:(0,k.jsxs)(p.Picker,{selectedValue:G,onValueChange:e=>U(e),style:C.picker,dropdownIconColor:y.default.white,children:[(0,k.jsx)(p.Picker.Item,{label:"\ud83c\uddfa\ud83c\uddfe +598",value:"598",color:y.default.background}),(0,k.jsx)(p.Picker.Item,{label:"\ud83c\udde6\ud83c\uddf7 +54",value:"54",color:y.default.background}),(0,k.jsx)(p.Picker.Item,{label:"\ud83c\udde8\ud83c\uddf1 +56",value:"56",color:y.default.background}),(0,k.jsx)(p.Picker.Item,{label:"\ud83c\udde7\ud83c\uddf7 +55",value:"55",color:y.default.background}),(0,k.jsx)(p.Picker.Item,{label:"\ud83c\uddf5\ud83c\uddfe +595",value:"595",color:y.default.background}),(0,k.jsx)(p.Picker.Item,{label:"\ud83c\uddea\ud83c\uddf8 +34",value:"34",color:y.default.background}),(0,k.jsx)(p.Picker.Item,{label:"\ud83c\uddfa\ud83c\uddf8 +1",value:"1",color:y.default.background})]})}),(0,k.jsx)(u.default,{style:[C.input,C.phoneInput],placeholder:"Ej: 99123456",placeholderTextColor:y.default.textSoft,keyboardType:"phone-pad",value:H,onChangeText:L})]}),(0,k.jsxs)(n.default,{style:C.modalButtons,children:[(0,k.jsx)(l.default,{style:[C.modalButton,C.cancelButton],onPress:()=>P(!1),children:(0,k.jsx)(o.default,{style:C.cancelButtonText,children:"Cancelar"})}),(0,k.jsx)(l.default,{style:[C.modalButton,C.saveButton,'SHARE'===A&&{backgroundColor:y.default.success}],onPress:async()=>{if('SHARE'===A){if(!H)return void s.default.alert('Falta tel\xe9fono','Ingresa el n\xfamero para registrar el env\xedo');const e=G+H.replace(/\D/g,'');try{await(0,v.updateTicketStatus)({ticketId:B.id,estado:B.estado,comprador_telefono:e})}catch(e){console.log('Error updating phone',e)}Q(!0);let t=`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${B.code}&bgcolor=ffffff`;try{const e=await fetch(t),n=await e.blob();t=await new Promise(e=>{const t=new FileReader;t.onloadend=()=>e(t.result),t.readAsDataURL(n)})}catch(e){console.log('Error fetching QR, using URL fallback')}const n=`\n      <html>\n        <head>\n          <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />\n          <style>\n            @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Montserrat:wght@400;600;800&family=Roboto+Mono:wght@500&display=swap');\n            \n            * {\n              -webkit-print-color-adjust: exact !important;\n              print-color-adjust: exact !important;\n              box-sizing: border-box;\n            }\n\n            body {\n              margin: 0;\n              padding: 0;\n              background-color: #000;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              min-height: 100vh;\n            }\n\n            /* Container to force background color printing via box-shadow hack if needed, \n               but explicit background-color with print-color-adjust usually works. */\n            .ticket-wrapper {\n              padding: 20px;\n              background: #000;\n            }\n\n            .ticket {\n              width: 800px;\n              height: 320px;\n              /* Fallback background color */\n              background-color: #12090D;\n              /* Gradient background with texture */\n              background-image: \n                radial-gradient(circle at 85% 20%, #370617 0%, transparent 70%),\n                repeating-linear-gradient(45deg, rgba(255,255,255,0.03) 0px, rgba(255,255,255,0.03) 1px, transparent 1px, transparent 10px);\n              border-radius: 20px;\n              display: flex;\n              position: relative;\n              overflow: hidden;\n              border: 2px solid #F48C06;\n              box-shadow: 0 0 50px rgba(244, 140, 6, 0.1);\n            }\n\n            .main-content {\n              flex: 1;\n              padding: 35px 40px;\n              display: flex;\n              flex-direction: column;\n              justify-content: space-between;\n              border-right: 3px dashed rgba(244, 140, 6, 0.5);\n              position: relative;\n              z-index: 2;\n            }\n\n            .stub {\n              width: 250px;\n              background-color: #1B0E14;\n              padding: 25px;\n              display: flex;\n              flex-direction: column;\n              align-items: center;\n              justify-content: center;\n              position: relative;\n              z-index: 2;\n            }\n\n            /* Notches */\n            .notch {\n              position: absolute;\n              width: 40px;\n              height: 40px;\n              background-color: #000; /* Match body bg */\n              border-radius: 50%;\n              z-index: 10;\n              right: 230px;\n            }\n            .notch-top { top: -20px; border-bottom: 2px solid #F48C06; }\n            .notch-bottom { bottom: -20px; border-top: 2px solid #F48C06; }\n\n            /* Branding */\n            .brand-row {\n              display: flex;\n              align-items: center;\n              gap: 15px;\n              margin-bottom: 10px;\n            }\n            \n            .brand-logo {\n              font-family: 'Playfair Display', serif;\n              font-size: 22px;\n              color: #F48C06;\n              text-transform: uppercase;\n              letter-spacing: 3px;\n              font-weight: 900;\n            }\n\n            .show-title {\n              font-family: 'Playfair Display', serif;\n              font-size: 42px;\n              color: #F5F1ED;\n              margin: 0;\n              line-height: 1;\n              text-transform: uppercase;\n              text-shadow: 3px 3px 0 #370617;\n              max-width: 450px;\n            }\n\n            /* Info Grid */\n            .info-grid {\n              display: grid;\n              grid-template-columns: auto auto;\n              gap: 25px 40px;\n              margin-top: auto;\n            }\n\n            .info-group label {\n              display: block;\n              color: #F48C06;\n              font-family: 'Montserrat', sans-serif;\n              font-size: 10px;\n              text-transform: uppercase;\n              letter-spacing: 1.5px;\n              margin-bottom: 4px;\n              font-weight: 800;\n            }\n\n            .info-group span {\n              color: #fff;\n              font-family: 'Montserrat', sans-serif;\n              font-size: 16px;\n              font-weight: 600;\n              display: block;\n            }\n\n            /* QR & Stub */\n            .qr-frame {\n              background: #fff;\n              padding: 8px;\n              border-radius: 8px;\n              margin-bottom: 15px;\n              box-shadow: 0 4px 15px rgba(0,0,0,0.5);\n            }\n            \n            .qr-code {\n              width: 150px;\n              height: 150px;\n              display: block;\n            }\n\n            .ticket-id {\n              font-family: 'Roboto Mono', monospace;\n              color: #F48C06;\n              font-size: 11px;\n              letter-spacing: 1px;\n              text-align: center;\n              opacity: 0.8;\n            }\n\n            /* Status Badge */\n            .status-badge {\n              position: absolute;\n              top: 35px;\n              right: 30px;\n              border: 2px solid #F48C06;\n              color: #F48C06;\n              padding: 6px 16px;\n              border-radius: 4px;\n              font-family: 'Montserrat', sans-serif;\n              font-weight: 900;\n              font-size: 12px;\n              text-transform: uppercase;\n              letter-spacing: 1px;\n              background: rgba(244, 140, 6, 0.15);\n              transform: rotate(-5deg);\n            }\n\n            /* Decorative Elements */\n            .gold-strip {\n              position: absolute;\n              left: 0;\n              top: 0;\n              bottom: 0;\n              width: 8px;\n              background: linear-gradient(to bottom, #F48C06, #FFBE0B, #F48C06);\n              z-index: 5;\n            }\n          </style>\n        </head>\n        <body>\n          <div class="ticket-wrapper">\n            <div class="ticket">\n              <div class="gold-strip"></div>\n              <div class="notch notch-top"></div>\n              <div class="notch notch-bottom"></div>\n              \n              <div class="main-content">\n                <div>\n                  <div class="brand-row">\n                    <span style="color: #F48C06; font-size: 20px;">\u2605</span>\n                    <div class="brand-logo">Baco Teatro</div>\n                    <span style="color: #F48C06; font-size: 20px;">\u2605</span>\n                  </div>\n                  <h1 class="show-title">${_}</h1>\n                </div>\n                \n                <div class="info-grid">\n                  <div class="info-group">\n                    <label>Fecha</label>\n                    <span>${new Date(O).toLocaleDateString('es-ES',{weekday:'long',day:'numeric',month:'long'})}</span>\n                  </div>\n                  <div class="info-group">\n                    <label>Hora</label>\n                    <span>${new Date(O).toLocaleTimeString('es-ES',{hour:'2-digit',minute:'2-digit'})} HS</span>\n                  </div>\n                  <div class="info-group">\n                    <label>Lugar</label>\n                    <span>${W}</span>\n                  </div>\n                  <div class="info-group">\n                    <label>Precio</label>\n                    <span>$${B.precio}</span>\n                  </div>\n                </div>\n\n                <div class="status-badge">\n                  ${'PAGADO'===B.estado?'PAGADO':'PENDIENTE'}\n                </div>\n              </div>\n\n              <div class="stub">\n                <div class="qr-frame">\n                  <img src="${t}" class="qr-code" />\n                </div>\n                <div class="ticket-id">ID: ${B.code}</div>\n              </div>\n            </div>\n          </div>\n        </body>\n      </html>\n      `;try{{if(!E||!S)return void s.default.alert('Error','Librer\xedas de PDF no cargadas. Intenta de nuevo en unos segundos.');const e=document.createElement('iframe');e.style.position='fixed',e.style.top='-10000px',e.style.left='-10000px',e.style.width='1000px',e.style.height='1000px',e.style.border='none',document.body.appendChild(e);const t=e.contentWindow.document;t.open(),t.write(n),t.close(),await new Promise(t=>{e.onload=t,setTimeout(t,1e3)}),await new Promise(e=>setTimeout(e,500));const o=t.querySelector('.ticket-wrapper');if(!o)throw new Error('Ticket element not found in iframe');const r=await S(o,{scale:2,backgroundColor:'#000000',useCORS:!0,logging:!1,windowWidth:1e3,windowHeight:1e3}),l=r.toDataURL('image/jpeg',.95),i=new E({orientation:'landscape',unit:'px',format:[r.width,r.height]});i.addImage(l,'JPEG',0,0,r.width,r.height),document.body.removeChild(e);const c=i.output('blob'),u=new File([c],`Entrada_${B.code}.pdf`,{type:'application/pdf'});if(navigator.canShare&&navigator.canShare({files:[u]}))try{await navigator.share({files:[u],title:'Entrada Baco Teatro',text:`Aqu\xed tienes tu entrada para ${_}.`})}catch(e){console.log('Share cancelled or failed',e)}else i.save(`Entrada_${B.code}.pdf`),s.default.alert('Descarga iniciada','El PDF se ha descargado. Puedes compartirlo desde tus descargas.')}}catch(e){console.error(e),s.default.alert('Error','No se pudo generar el PDF: '+e.message)}finally{Q(!1),P(!1)}return}B&&M&&Z(B.id,M,{comprador_nombre:N,comprador_telefono:H})},disabled:K,children:K?(0,k.jsx)(i.default,{color:y.default.black}):(0,k.jsx)(o.default,{style:C.saveButtonText,children:'SHARE'===A?'Enviar PDF por WhatsApp':'Confirmar'})})]})]})})})]})};var t=j(_r(d[1])),n=e(_r(d[2])),o=e(_r(d[3])),r=e(_r(d[4])),l=e(_r(d[5])),i=e(_r(d[6])),s=e(_r(d[7])),c=e(_r(d[8])),u=e(_r(d[9])),p=(e(_r(d[10])),e(_r(d[11])),_r(d[12])),f=_r(d[13]),x=(j(_r(d[14])),j(_r(d[15])),e(_r(d[16]))),h=e(_r(d[17])),b=e(_r(d[18])),y=e(_r(d[19])),v=_r(d[20]),w=e(_r(d[21])),k=_r(d[22]);function j(e,t){if("function"==typeof WeakMap)var n=new WeakMap,o=new WeakMap;return(j=function(e,t){if(!t&&e&&e.__esModule)return e;var r,l,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(r=t?o:n){if(r.has(e))return r.get(e);r.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((l=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(l.get||l.set)?r(i,t,l):i[t]=e[t]);return i})(e,t)}let E=null,S=null;_r(d[24])(d[23],d.paths).then(e=>{E=e.default}),_r(d[24])(d[25],d.paths).then(e=>{S=e.default});const C=r.default.create({center:{flex:1,alignItems:'center',justifyContent:'center'},ticketRow:{flexDirection:'row',justifyContent:'space-between',paddingVertical:10,borderBottomWidth:1,borderBottomColor:y.default.border},ticketCode:{color:y.default.white,fontWeight:'700'},meta:{color:y.default.textMuted,fontSize:12},buyerInfo:{color:y.default.secondary,fontSize:12,fontStyle:'italic'},ticketActions:{alignItems:'flex-end',gap:8},actionsRow:{flexDirection:'row',gap:12,alignItems:'center'},iconButton:{padding:4},actionText:{color:y.default.secondary,fontWeight:'600'},empty:{color:y.default.textSoft,textAlign:'center',marginTop:40},phoneRow:{flexDirection:'row',gap:10,marginBottom:15},pickerContainer:{flex:.35,backgroundColor:y.default.surface,borderRadius:8,borderWidth:1,borderColor:y.default.border,justifyContent:'center',height:50},picker:{color:y.default.white,height:50},phoneInput:{flex:.65,marginBottom:0},modalOverlay:{flex:1,backgroundColor:'rgba(0,0,0,0.8)',justifyContent:'center',padding:20},modalContent:{backgroundColor:y.default.surfaceAlt,borderRadius:20,padding:24,borderWidth:1,borderColor:y.default.border},modalTitle:{fontSize:20,fontWeight:'bold',color:y.default.text,marginBottom:8,textAlign:'center'},modalSubtitle:{fontSize:14,color:y.default.textMuted,marginBottom:20,textAlign:'center'},label:{color:y.default.secondary,fontSize:12,marginBottom:6,fontWeight:'600'},input:{backgroundColor:y.default.background,borderRadius:8,borderWidth:1,borderColor:y.default.border,padding:12,color:y.default.text,marginBottom:16},modalButtons:{flexDirection:'row',gap:12,marginTop:10},modalButton:{flex:1,padding:14,borderRadius:12,alignItems:'center'},cancelButton:{backgroundColor:'transparent',borderWidth:1,borderColor:y.default.textMuted},saveButton:{backgroundColor:y.default.secondary},cancelButtonText:{color:y.default.textMuted,fontWeight:'600'},saveButtonText:{color:y.default.black,fontWeight:'bold'}})},785,{"0":1,"1":14,"2":155,"3":292,"4":27,"5":532,"6":355,"7":537,"8":678,"9":325,"10":669,"11":83,"12":749,"13":538,"14":786,"15":788,"16":533,"17":660,"18":742,"19":535,"20":349,"21":703,"22":352,"23":793,"24":705,"25":794,"paths":{"793":"/_expo/static/js/web/jspdf.es-619f9ee7f007c98af3c009b53cd0e869.js","794":"/_expo/static/js/web/html2canvas-9f4d112a43ab9f6fea2b47289c618eb3.js"}});
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.Orientation=void 0,e.printAsync=async function(t){return await c.default.print(t)},e.printToFileAsync=async function(t={}){return await c.default.printToFileAsync(t)},e.selectPrinterAsync=async function(){if(c.default.selectPrinter)return await c.default.selectPrinter();throw new n.UnavailabilityError('Print','selectPrinterAsync')};var n=r(d[1]),c=(t(r(d[2])),t(r(d[3])));e.Orientation=c.default.Orientation},786,[1,543,83,787]);
__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={get Orientation(){return{portrait:'portrait',landscape:'landscape'}},async print(){window.print()},async printToFileAsync(){window.print()}}},787,[]);
__d(function(g,r,i,a,m,e,d){var n=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.isAvailableAsync=async function(){if(s.default)return!s.default.isAvailableAsync||await s.default.isAvailableAsync();return!1},e.shareAsync=async function(n,l={}){if(!s.default||!s.default.shareAsync)throw new t.UnavailabilityError('Sharing','shareAsync');return await s.default.shareAsync(n,l)};var t=r(d[1]),s=n(r(d[2]))},788,[1,543,789]);
__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(d[0]);e.default={isAvailableAsync:async()=>'undefined'!=typeof navigator&&!!navigator.share,async shareAsync(t,s={}){if(!navigator.share)throw new n.UnavailabilityError('navigator','share');await navigator.share(Object.assign({},s,{url:t}))}}},789,[543]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=function(){const[e,n]=(0,t.useState)(h),[j,k]=(0,t.useState)(!1),[v,C]=(0,t.useState)([]),[_,T]=(0,t.useState)(!0),w=async()=>{T(!0);try{const e=await(0,p.getActorTransfers)();C(e)}finally{T(!1)}};(0,t.useEffect)(()=>{w()},[]);return(0,y.jsxs)(u.default,{children:[(0,y.jsxs)(c.default,{title:"Pasar entradas",subtitle:"Tambi\xe9n pod\xe9s transferir sin recibir nada",children:[['ticketCode','destino','motivo'].map(t=>(0,y.jsx)(o.default,{style:[x.input,'motivo'===t&&x.multiline],placeholder:'ticketCode'===t?'C\xf3digo de ticket':'destino'===t?'C\xe9dula actor destino':'Motivo (opcional)',placeholderTextColor:b.default.textSoft,value:e[t],onChangeText:e=>n(r=>Object.assign({},r,{[t]:e})),multiline:'motivo'===t},t)),(0,y.jsx)(i.default,{style:x.button,onPress:async()=>{if(e.ticketCode&&e.destino){k(!0);try{await(0,p.transferTicket)(e),n(h),w(),s.default.alert('Transferencia registrada','Qued\xf3 registrada en el historial')}catch(e){s.default.alert('Error',e.message||'No se pudo transferir')}finally{k(!1)}}else s.default.alert('Falta info','Ingres\xe1 c\xf3digo y c\xe9dula destino')},disabled:j,children:j?(0,y.jsx)(l.default,{color:b.default.black}):(0,y.jsx)(r.default,{style:x.buttonText,children:"Registrar transferencia"})})]}),(0,y.jsx)(c.default,{title:"Historial",subtitle:"\xdaltimos movimientos",children:_?(0,y.jsx)(l.default,{color:b.default.secondary}):(0,y.jsx)(f.default,{events:v})})]})};var t=(function(e,t){if("function"==typeof WeakMap)var r=new WeakMap,o=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var i,n,l={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return l;if(i=t?o:r){if(i.has(e))return i.get(e);i.set(e,l)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((n=(i=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(n.get||n.set)?i(l,t,n):l[t]=e[t]);return l})(e,t)})(_r(d[1])),r=e(_r(d[2])),o=e(_r(d[3])),i=e(_r(d[4])),n=e(_r(d[5])),l=e(_r(d[6])),s=e(_r(d[7])),u=e(_r(d[8])),c=e(_r(d[9])),f=e(_r(d[10])),b=e(_r(d[11])),p=_r(d[12]),y=_r(d[13]);const h={ticketCode:'',destino:'',motivo:''};const x=n.default.create({input:{backgroundColor:b.default.surface,borderRadius:12,borderWidth:1,borderColor:b.default.border,padding:12,color:b.default.text},multiline:{height:80,textAlignVertical:'top'},button:{backgroundColor:b.default.secondary,borderRadius:12,paddingVertical:14,alignItems:'center'},buttonText:{color:b.default.black,fontWeight:'700'}})},790,[1,14,292,325,532,27,355,537,533,660,754,535,349,352]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=function(){const[e,r]=(0,t.useState)(null),[y,j]=(0,t.useState)(!0);if((0,t.useEffect)(()=>{(async()=>{try{const e=await(0,c.getActorHistory)();r(e)}finally{j(!1)}})()},[]),y)return(0,f.jsx)(u.default,{scrollable:!1,children:(0,f.jsx)(l.default,{style:h.center,children:(0,f.jsx)(n.default,{color:i.default.secondary})})});return(0,f.jsxs)(u.default,{children:[(0,f.jsxs)(o.default,{title:"Caja",subtitle:"Resumen de movimientos",children:[(0,f.jsxs)(l.default,{style:h.row,children:[(0,f.jsx)(s.default,{style:h.label,children:"Vendidas"}),(0,f.jsx)(s.default,{style:h.value,children:e?.resumen?.vendidas||0})]}),(0,f.jsxs)(l.default,{style:h.row,children:[(0,f.jsx)(s.default,{style:h.label,children:"Pagadas"}),(0,f.jsx)(s.default,{style:h.value,children:e?.resumen?.pagadas||0})]}),(0,f.jsxs)(l.default,{style:h.row,children:[(0,f.jsx)(s.default,{style:h.label,children:"Caja entregada"}),(0,f.jsxs)(s.default,{style:[h.value,h.success],children:["$",e?.resumen?.entregado||0]})]})]}),(0,f.jsxs)(o.default,{title:"Entradas usadas",subtitle:"Ingreso de p\xfablico",children:[(e?.usadas||[]).map(e=>(0,f.jsxs)(l.default,{style:h.row,children:[(0,f.jsxs)(l.default,{children:[(0,f.jsx)(s.default,{style:h.label,children:e.obra}),(0,f.jsx)(s.default,{style:h.meta,children:new Date(e.fecha).toLocaleDateString()})]}),(0,f.jsx)(s.default,{style:h.value,children:e.cantidad})]},e.showId)),(!e?.usadas||0===e.usadas.length)&&(0,f.jsx)(s.default,{style:h.meta,children:"A\xfan no se registran ingresos"})]})]})};var t=(function(e,t){if("function"==typeof WeakMap)var l=new WeakMap,s=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var r,n,u={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return u;if(r=t?s:l){if(r.has(e))return r.get(e);r.set(e,u)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((n=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(n.get||n.set)?r(u,t,n):u[t]=e[t]);return u})(e,t)})(_r(d[1])),l=e(_r(d[2])),s=e(_r(d[3])),r=e(_r(d[4])),n=e(_r(d[5])),u=e(_r(d[6])),o=e(_r(d[7])),i=e(_r(d[8])),c=_r(d[9]),f=_r(d[10]);const h=r.default.create({center:{flex:1,alignItems:'center',justifyContent:'center'},row:{flexDirection:'row',justifyContent:'space-between',paddingVertical:10,borderBottomWidth:1,borderBottomColor:i.default.border},label:{color:i.default.white,fontWeight:'600'},value:{color:i.default.white,fontWeight:'700'},success:{color:i.default.secondary},meta:{color:i.default.textMuted,fontSize:12}})},791,[1,14,155,292,27,355,533,660,535,349,352]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=function(){const[e,n]=(0,t.useState)([]),[h,p]=(0,t.useState)(!0);(0,t.useEffect)(()=>{x()},[]);const x=async()=>{p(!0);try{const e=await(0,f.getActorSchedule)();n(e.rehearsals||[])}catch(e){console.error(e)}finally{p(!1)}};return(0,u.jsxs)(i.default,{children:[(0,u.jsx)(o.default,{style:y.header,children:(0,u.jsx)(r.default,{style:y.title,children:"Mis Ensayos"})}),h?(0,u.jsx)(c.default,{color:s.default.secondary}):(0,u.jsx)(l.default,{data:e,renderItem:({item:e})=>(0,u.jsxs)(o.default,{style:y.card,children:[(0,u.jsxs)(o.default,{style:y.cardHeader,children:[(0,u.jsx)(r.default,{style:y.cardTitle,children:e.title||'Ensayo'}),e.obra&&(0,u.jsx)(r.default,{style:y.cardShow,children:e.obra})]}),(0,u.jsx)(r.default,{style:y.cardDate,children:new Date(e.date||e.fecha).toLocaleString()}),(0,u.jsx)(r.default,{style:y.cardLocation,children:e.location||e.lugar}),e.notes&&(0,u.jsx)(r.default,{style:y.cardNotes,children:e.notes})]}),keyExtractor:e=>e.id,contentContainerStyle:{paddingBottom:20},ListEmptyComponent:(0,u.jsx)(r.default,{style:y.emptyText,children:"No tienes ensayos programados"})})]})};var t=(function(e,t){if("function"==typeof WeakMap)var o=new WeakMap,r=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var n,l,c={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return c;if(n=t?r:o){if(n.has(e))return n.get(e);n.set(e,c)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((l=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(l.get||l.set)?n(c,t,l):c[t]=e[t]);return c})(e,t)})(_r(d[1])),o=e(_r(d[2])),r=e(_r(d[3])),n=e(_r(d[4])),l=e(_r(d[5])),c=e(_r(d[6])),i=e(_r(d[7])),s=e(_r(d[8])),f=_r(d[9]),u=_r(d[10]);const y=n.default.create({header:{marginBottom:20},title:{fontSize:28,fontWeight:'bold',color:s.default.text},card:{backgroundColor:s.default.surface,padding:16,borderRadius:12,marginBottom:12,borderWidth:1,borderColor:s.default.border},cardHeader:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',marginBottom:4},cardTitle:{fontSize:18,fontWeight:'bold',color:s.default.text,flex:1},cardShow:{fontSize:12,color:s.default.primary,fontWeight:'bold',backgroundColor:'rgba(106, 4, 15, 0.2)',paddingHorizontal:8,paddingVertical:2,borderRadius:4},cardDate:{fontSize:16,color:s.default.secondary,marginBottom:4},cardLocation:{fontSize:14,color:s.default.textMuted,marginBottom:4},cardNotes:{fontSize:14,fontStyle:'italic',color:s.default.textSoft},emptyText:{textAlign:'center',color:s.default.textMuted,marginTop:20}})},792,[1,14,155,292,27,233,355,533,535,349,352]);