__d(function(g,r,i,a,m,e,d){var n=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return(0,v.jsxs)(w.Navigator,{screenOptions:{headerShown:!1},children:[(0,v.jsx)(w.Screen,{name:"DirectorTabs",component:N}),(0,v.jsx)(w.Screen,{name:"DirectorShowDetail",component:u.default,options:{headerShown:!0,title:'Detalle de Funci\xf3n'}}),(0,v.jsx)(w.Screen,{name:"Manual",component:h.default,options:{headerShown:!1}})]})};n(r(d[1]));var o=r(d[2]),t=r(d[3]),c=r(d[4]),s=n(r(d[5])),l=n(r(d[6])),u=n(r(d[7])),f=n(r(d[8])),p=n(r(d[9])),S=n(r(d[10])),j=n(r(d[11])),x=n(r(d[12])),h=n(r(d[13])),b=n(r(d[14])),v=r(d[15]);const y=(0,o.createBottomTabNavigator)(),w=(0,t.createNativeStackNavigator)(),B={Resumen:'analytics-outline',Funciones:'calendar-outline',Vendedores:'people-outline',Escaner:'qr-code-outline',Reportes:'bar-chart-outline',Ensayos:'time-outline',Perfil:'person-circle-outline'};function N(){return(0,v.jsxs)(y.Navigator,{screenOptions:({route:n})=>({headerShown:!1,tabBarActiveTintColor:b.default.secondary,tabBarInactiveTintColor:b.default.textMuted,tabBarStyle:{backgroundColor:b.default.surface,borderTopColor:b.default.border},tabBarIcon:({color:o,size:t})=>(0,v.jsx)(c.Ionicons,{name:B[n.name],size:t,color:o})}),children:[(0,v.jsx)(y.Screen,{name:"Resumen",component:s.default}),(0,v.jsx)(y.Screen,{name:"Funciones",component:l.default}),(0,v.jsx)(y.Screen,{name:"Ensayos",component:j.default}),(0,v.jsx)(y.Screen,{name:"Vendedores",component:S.default}),(0,v.jsx)(y.Screen,{name:"Escaner",component:f.default}),(0,v.jsx)(y.Screen,{name:"Reportes",component:p.default}),(0,v.jsx)(y.Screen,{name:"Perfil",component:x.default})]})}},757,[1,14,707,475,538,762,763,769,770,783,784,785,744,749,535,352]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=function(){const[e,r]=(0,t.useState)(null),[w,T]=(0,t.useState)(!0),[M,R]=(0,t.useState)(!1),{user:z}=(0,j.useAuth)(),D=(0,t.useState)(new c.default.Value(0))[0],P=async()=>{try{const e=await(0,p.getDirectorDashboard)();r(e),c.default.timing(D,{toValue:1,duration:500,useNativeDriver:!0}).start()}catch(e){console.error(e)}finally{T(!1),R(!1)}};(0,t.useEffect)(()=>{P()},[]);const W=(0,t.useCallback)(()=>{R(!0),P()},[]);if(w)return(0,S.jsx)(f.default,{scrollable:!1,children:(0,S.jsx)(l.default,{style:v.center,children:(0,S.jsx)(o.default,{color:y.default.secondary})})});return(0,S.jsx)(f.default,{refreshing:M,onRefresh:W,children:(0,S.jsxs)(c.default.View,{style:{opacity:D,gap:14},children:[(0,S.jsx)(b.default,{variant:"card"}),(0,S.jsx)(n.default,{style:v.title,children:"Hola, director"}),(0,S.jsx)(n.default,{style:v.subtitle,children:e?.obraPrincipal||'Tus producciones'}),(0,S.jsxs)(l.default,{style:v.statsRow,children:[(0,S.jsx)(x.default,{label:"Entradas",value:e?.stats?.tickets||0,helper:`Pagadas ${e?.stats?.pagadas||0}`}),(0,S.jsx)(x.default,{label:"Actores",value:e?.stats?.actores||0,gradient:y.default.gradientSecondary})]}),(0,S.jsxs)(h.default,{title:"Salas abiertas",subtitle:"Estado por funci\xf3n",children:[(e?.functions||[]).map(e=>(0,S.jsxs)(l.default,{style:v.functionRow,children:[(0,S.jsxs)(l.default,{style:{flex:1},children:[(0,S.jsx)(n.default,{style:v.functionTitle,children:e.titulo}),(0,S.jsxs)(n.default,{style:v.functionMeta,children:[new Date(e.fecha).toLocaleString()," /  ",e.localidad]})]}),(0,S.jsxs)(l.default,{style:v.functionStats,children:[(0,S.jsx)(l.default,{style:v.pill,children:(0,S.jsxs)(n.default,{style:v.pillText,children:["Pagadas ",e.pagadas]})}),(0,S.jsxs)(n.default,{style:v.metaText,children:["Ingresadas ",e.usadas]})]})]},e.id)),(!e?.functions||0===e.functions.length)&&(0,S.jsx)(n.default,{style:v.empty,children:"Todav\xeda no creaste funciones"})]}),(0,S.jsxs)(h.default,{title:"Actores",subtitle:"Resultado por vendedor",children:[(e?.actors||[]).map(e=>(0,S.jsxs)(l.default,{style:v.actorRow,children:[(0,S.jsxs)(l.default,{style:{flex:1},children:[(0,S.jsx)(n.default,{style:v.actorName,children:e.nombre}),(0,S.jsxs)(n.default,{style:v.metaText,children:["Stock ",e.stock," /  Vendidas ",e.vendidas]})]}),(0,S.jsxs)(l.default,{style:v.actorActions,children:[(0,S.jsxs)(n.default,{style:[v.metaText,v.alignRight,v.moneyText],children:["$",e.caja]}),['ADMIN','SUPER'].includes(z?.role)&&(0,S.jsx)(s.default,{onPress:()=>{return t=e.id,void i.default.alert('Eliminar vendedor','El stock pendiente volver\xe1 a direcci\xf3n. \xbfContinuar?',[{text:'Cancelar',style:'cancel'},{text:'Eliminar',style:'destructive',onPress:async()=>{try{await(0,p.deleteVendor)(t),W()}catch(e){i.default.alert('Error',e.message||'No se pudo eliminar')}}}]);var t},style:v.deleteButton,children:(0,S.jsx)(u.Ionicons,{name:"trash-outline",size:18,color:y.default.error})})]})]},e.id)),(!e?.actors||0===e.actors.length)&&(0,S.jsx)(n.default,{style:v.empty,children:"A\xfan no hay actores asignados"})]})]})})};var t=(function(e,t){if("function"==typeof WeakMap)var l=new WeakMap,n=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var r,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(r=t?n:l){if(r.has(e))return r.get(e);r.set(e,s)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((o=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?r(s,t,o):s[t]=e[t]);return s})(e,t)})(_r(d[1])),l=e(_r(d[2])),n=e(_r(d[3])),r=e(_r(d[4])),o=e(_r(d[5])),s=e(_r(d[6])),i=e(_r(d[7])),c=e(_r(d[8])),u=_r(d[9]),f=e(_r(d[10])),x=e(_r(d[11])),h=e(_r(d[12])),y=e(_r(d[13])),p=_r(d[14]),j=_r(d[15]),b=e(_r(d[16])),S=_r(d[17]);const v=r.default.create({center:{flex:1,justifyContent:'center',alignItems:'center'},title:{fontSize:28,fontWeight:'bold',color:y.default.text},subtitle:{fontSize:16,color:y.default.textMuted,marginTop:-8},statsRow:{flexDirection:'row',gap:12},functionRow:{flexDirection:'row',alignItems:'center',paddingVertical:12,borderBottomWidth:1,borderBottomColor:y.default.border},functionTitle:{fontSize:16,fontWeight:'600',color:y.default.text},functionMeta:{fontSize:13,color:y.default.textMuted,marginTop:4},functionStats:{alignItems:'flex-end'},pill:{backgroundColor:y.default.success+'20',paddingHorizontal:10,paddingVertical:4,borderRadius:12,marginBottom:4},pillText:{color:y.default.success,fontSize:12,fontWeight:'600'},metaText:{fontSize:13,color:y.default.textMuted},actorRow:{flexDirection:'row',alignItems:'center',paddingVertical:12,borderBottomWidth:1,borderBottomColor:y.default.border},actorName:{fontSize:16,fontWeight:'600',color:y.default.text},actorActions:{flexDirection:'row',alignItems:'center',gap:12},alignRight:{textAlign:'right'},moneyText:{color:y.default.secondary,fontWeight:'700',fontSize:14},deleteButton:{padding:8},empty:{color:y.default.textMuted,textAlign:'center',paddingVertical:20,fontStyle:'italic'}})},762,[1,14,155,292,27,355,532,537,230,538,533,741,660,535,349,342,704,352]);
__d(function(g,_r,_i,a,_m,_e,_d){var e=_r(_d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=function({navigation:e}){const{showAlert:o}=(0,x.useAlert)(),[w,C]=(0,t.useState)([]),[S,W]=(0,t.useState)(!0),[T,B]=(0,t.useState)(!1),[v,D]=(0,t.useState)(m),[P,O]=(0,t.useState)(!1),[M,I]=(0,t.useState)(!1),[F,V]=(0,t.useState)(!1),_=async()=>{W(!0);try{const e=await(0,b.listDirectorShows)();C(e)}finally{W(!1)}};(0,t.useEffect)(()=>e.addListener('focus',()=>{_()}),[e]);return(0,j.jsxs)(u.default,{children:[(0,j.jsxs)(l.default,{style:k.header,children:[(0,j.jsx)(r.default,{style:k.title,children:"Funciones"}),(0,j.jsxs)(d.default,{style:k.addButton,onPress:()=>O(!0),children:[(0,j.jsx)(y.Ionicons,{name:"add",size:24,color:p.default.black}),(0,j.jsx)(r.default,{style:k.addButtonText,children:"Nueva"})]})]}),(0,j.jsx)(f.default,{title:"Funciones creadas",subtitle:`${w.length} registros`,children:S?(0,j.jsx)(i.default,{color:p.default.secondary}):w.map(t=>(0,j.jsx)(d.default,{onPress:()=>e.navigate('DirectorShowDetail',{show:t}),activeOpacity:.8,children:(0,j.jsx)(h.default,{show:t,footer:(0,j.jsxs)(l.default,{style:{flexDirection:'row',justifyContent:'space-between',alignItems:'center'},children:[(0,j.jsxs)(r.default,{style:k.meta,children:["Stock actores ",t.enStock," /  Vendidas ",t.vendidas]}),(0,j.jsx)(y.Ionicons,{name:"chevron-forward",size:20,color:p.default.textMuted})]})})},t.id))}),(0,j.jsx)(c.default,{animationType:"slide",transparent:!0,visible:P,onRequestClose:()=>O(!1),children:(0,j.jsx)(l.default,{style:k.modalOverlay,children:(0,j.jsxs)(l.default,{style:k.modalContent,children:[(0,j.jsx)(r.default,{style:k.modalTitle,children:"Nueva Funci\xf3n"}),(0,j.jsx)(r.default,{style:k.label,children:"Nombre de la obra"}),(0,j.jsx)(n.default,{style:k.input,placeholder:"Ej: Hamlet",placeholderTextColor:p.default.textSoft,value:v.obra,onChangeText:e=>D(t=>Object.assign({},t,{obra:e}))}),!1,(M||F)&&!1,(0,j.jsxs)(l.default,{style:{marginBottom:20},children:[(0,j.jsx)(r.default,{style:k.label,children:"Fecha y Hora"}),(0,j.jsxs)(l.default,{style:k.webDateContainer,children:[(0,j.jsxs)(l.default,{style:k.pickerGroup,children:[(0,j.jsx)(r.default,{style:k.pickerLabel,children:"D\xeda"}),(0,j.jsx)(l.default,{style:k.pickerWrapper,children:(0,j.jsx)(s.Picker,{selectedValue:v.fecha.getDate(),onValueChange:e=>{const t=new Date(v.fecha);t.setDate(e),D(e=>Object.assign({},e,{fecha:t}))},style:k.picker,children:Array.from({length:31},(e,t)=>t+1).map(e=>(0,j.jsx)(s.Picker.Item,{label:String(e),value:e},e))})})]}),(0,j.jsxs)(l.default,{style:[k.pickerGroup,{flex:1.5}],children:[(0,j.jsx)(r.default,{style:k.pickerLabel,children:"Mes"}),(0,j.jsx)(l.default,{style:k.pickerWrapper,children:(0,j.jsx)(s.Picker,{selectedValue:v.fecha.getMonth(),onValueChange:e=>{const t=new Date(v.fecha);t.setMonth(e),D(e=>Object.assign({},e,{fecha:t}))},style:k.picker,children:['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'].map((e,t)=>(0,j.jsx)(s.Picker.Item,{label:e,value:t},t))})})]}),(0,j.jsxs)(l.default,{style:[k.pickerGroup,{flex:1.2}],children:[(0,j.jsx)(r.default,{style:k.pickerLabel,children:"A\xf1o"}),(0,j.jsx)(l.default,{style:k.pickerWrapper,children:(0,j.jsx)(s.Picker,{selectedValue:v.fecha.getFullYear(),onValueChange:e=>{const t=new Date(v.fecha);t.setFullYear(e),D(e=>Object.assign({},e,{fecha:t}))},style:k.picker,children:Array.from({length:5},(e,t)=>(new Date).getFullYear()+t).map(e=>(0,j.jsx)(s.Picker.Item,{label:String(e),value:e},e))})})]})]}),(0,j.jsxs)(l.default,{style:[k.webDateContainer,{marginTop:10}],children:[(0,j.jsxs)(l.default,{style:k.pickerGroup,children:[(0,j.jsx)(r.default,{style:k.pickerLabel,children:"Hora"}),(0,j.jsx)(l.default,{style:k.pickerWrapper,children:(0,j.jsx)(s.Picker,{selectedValue:v.fecha.getHours(),onValueChange:e=>{const t=new Date(v.fecha);t.setHours(e),D(e=>Object.assign({},e,{fecha:t}))},style:k.picker,children:Array.from({length:24},(e,t)=>t).map(e=>(0,j.jsx)(s.Picker.Item,{label:String(e).padStart(2,'0'),value:e},e))})})]}),(0,j.jsx)(r.default,{style:{alignSelf:'flex-end',marginBottom:12,fontWeight:'bold',fontSize:18},children:":"}),(0,j.jsxs)(l.default,{style:k.pickerGroup,children:[(0,j.jsx)(r.default,{style:k.pickerLabel,children:"Minutos"}),(0,j.jsx)(l.default,{style:k.pickerWrapper,children:(0,j.jsx)(s.Picker,{selectedValue:v.fecha.getMinutes(),onValueChange:e=>{const t=new Date(v.fecha);t.setMinutes(e),D(e=>Object.assign({},e,{fecha:t}))},style:k.picker,children:Array.from({length:12},(e,t)=>5*t).map(e=>(0,j.jsx)(s.Picker.Item,{label:String(e).padStart(2,'0'),value:e},e))})})]})]})]}),(0,j.jsx)(r.default,{style:k.label,children:"Localidad / Sala"}),(0,j.jsx)(n.default,{style:k.input,placeholder:"Ej: Sala Principal",placeholderTextColor:p.default.textSoft,value:v.lugar,onChangeText:e=>D(t=>Object.assign({},t,{lugar:e}))}),(0,j.jsxs)(l.default,{style:k.rowInputs,children:[(0,j.jsxs)(l.default,{style:{flex:1,marginRight:8},children:[(0,j.jsx)(r.default,{style:k.label,children:"Capacidad"}),(0,j.jsx)(n.default,{style:k.input,placeholder:"Ej: 200",placeholderTextColor:p.default.textSoft,keyboardType:"numeric",value:v.capacidad,onChangeText:e=>D(t=>Object.assign({},t,{capacidad:e}))})]}),(0,j.jsxs)(l.default,{style:{flex:1,marginLeft:8},children:[(0,j.jsx)(r.default,{style:k.label,children:"Precio Base"}),(0,j.jsx)(n.default,{style:k.input,placeholder:"Ej: 500",placeholderTextColor:p.default.textSoft,keyboardType:"numeric",value:v.base_price,onChangeText:e=>D(t=>Object.assign({},t,{base_price:e}))})]})]}),(0,j.jsxs)(l.default,{style:k.modalButtons,children:[(0,j.jsx)(d.default,{style:[k.modalButton,k.cancelButton],onPress:()=>O(!1),children:(0,j.jsx)(r.default,{style:k.cancelButtonText,children:"Cancelar"})}),(0,j.jsx)(d.default,{style:[k.modalButton,k.saveButton],onPress:async()=>{if(v.obra&&v.lugar&&v.capacidad){B(!0);try{const e=v.fecha.toISOString();await(0,b.createShow)({obra:v.obra,fecha:e,lugar:v.lugar,capacidad:Number(v.capacidad),base_price:Number(v.base_price)||0}),D(m),O(!1),_(),o('Listo','Funci\xf3n creada y tickets generados')}catch(e){o('Error',e.message||'No se pudo crear la funci\xf3n')}finally{B(!1)}}else o('Falta info','Completa obra, lugar y capacidad')},disabled:T,children:T?(0,j.jsx)(i.default,{color:p.default.black}):(0,j.jsx)(r.default,{style:k.saveButtonText,children:"Crear"})})]})]})})})]})};var t=(function(e,t){if("function"==typeof WeakMap)var l=new WeakMap,r=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var o,n,d={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return d;if(o=t?r:l){if(o.has(e))return o.get(e);o.set(e,d)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((n=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(n.get||n.set)?o(d,t,n):d[t]=e[t]);return d})(e,t)})(_r(_d[1])),l=e(_r(_d[2])),r=e(_r(_d[3])),o=e(_r(_d[4])),n=e(_r(_d[5])),d=e(_r(_d[6])),i=e(_r(_d[7])),c=e(_r(_d[8])),s=(e(_r(_d[9])),e(_r(_d[10])),_r(_d[11])),u=e(_r(_d[12])),f=e(_r(_d[13])),h=e(_r(_d[14])),p=e(_r(_d[15])),b=_r(_d[16]),x=_r(_d[17]),y=_r(_d[18]),j=_r(_d[19]);const m={obra:'',fecha:new Date,lugar:'',capacidad:'',base_price:''};const k=o.default.create({header:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',marginBottom:20,paddingHorizontal:4},title:{fontSize:24,fontWeight:'bold',color:p.default.text},addButton:{flexDirection:'row',backgroundColor:p.default.secondary,paddingHorizontal:16,paddingVertical:8,borderRadius:20,alignItems:'center',gap:4},addButtonText:{color:p.default.black,fontWeight:'bold'},input:{backgroundColor:p.default.background,borderRadius:8,borderWidth:1,borderColor:p.default.border,padding:12,color:p.default.text,marginBottom:16},button:{backgroundColor:p.default.secondary,borderRadius:12,paddingVertical:14,alignItems:'center'},buttonText:{color:p.default.black,fontWeight:'700'},buttonSecondary:{borderRadius:12,paddingVertical:14,alignItems:'center',borderWidth:1,borderColor:p.default.secondary},buttonSecondaryText:{color:p.default.secondary,fontWeight:'700'},meta:{color:p.default.textMuted},insightsBox:{marginTop:12,padding:12,borderRadius:12,backgroundColor:p.default.surfaceAlt,gap:8},insightsTitle:{color:p.default.white,fontWeight:'700'},insightsRow:{flexDirection:'row',justifyContent:'space-between'},helper:{color:p.default.textMuted,fontSize:12},insightValue:{color:p.default.white,fontWeight:'700',fontSize:16},topSeller:{color:p.default.accent,fontWeight:'600'},actorBreakdown:{flexDirection:'row',justifyContent:'space-between',borderTopWidth:1,borderTopColor:p.default.border,paddingTop:8},actorName:{color:p.default.white,fontWeight:'600'},debtText:{color:p.default.error,fontWeight:'700'},successText:{color:p.default.success,fontWeight:'700'},modalOverlay:{flex:1,backgroundColor:'rgba(0,0,0,0.8)',justifyContent:'center',padding:20},modalContent:{backgroundColor:p.default.surfaceAlt,borderRadius:20,padding:24,borderWidth:1,borderColor:p.default.border},modalTitle:{fontSize:20,fontWeight:'bold',color:p.default.text,marginBottom:20,textAlign:'center'},label:{color:p.default.secondary,fontSize:12,marginBottom:6,fontWeight:'600'},modalButtons:{flexDirection:'row',gap:12,marginTop:10},modalButton:{flex:1,padding:14,borderRadius:12,alignItems:'center'},cancelButton:{backgroundColor:'transparent',borderWidth:1,borderColor:p.default.textMuted},saveButton:{backgroundColor:p.default.secondary},cancelButtonText:{color:p.default.textMuted,fontWeight:'600'},saveButtonText:{color:p.default.black,fontWeight:'bold'},dateTimeRow:{flexDirection:'row',gap:12,marginBottom:16},dateButton:{flex:1,flexDirection:'row',alignItems:'center',backgroundColor:p.default.background,padding:12,borderRadius:8,borderWidth:1,borderColor:p.default.border,gap:8},dateText:{color:p.default.text},webDateContainer:{flexDirection:'row',gap:8,marginBottom:8},pickerGroup:{flex:1},pickerLabel:{color:p.default.secondary,fontSize:14,marginBottom:4,textAlign:'center',fontWeight:'bold'},pickerWrapper:{backgroundColor:p.default.surface,borderRadius:8,borderWidth:1,borderColor:p.default.secondary,overflow:'hidden'},picker:{height:45,width:'100%',color:'#FFFFFF',backgroundColor:p.default.surface,borderWidth:0,fontSize:16,fontWeight:'600',paddingLeft:8},rowInputs:{flexDirection:'row'},webHelper:{color:p.default.warning,fontSize:10,marginBottom:10}})},763,[1,14,155,292,27,325,532,355,678,83,764,750,533,660,742,535,349,703,538,352]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0});var n={DateTimePickerAndroid:!0};Object.defineProperty(e,"DateTimePickerAndroid",{enumerable:!0,get:function(){return c.DateTimePickerAndroid}}),e.default=void 0;var o=t(r(d[1])),u=r(d[2]);Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||t in e&&e[t]===u[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}}))});var c=r(d[3]);e.default=o.default},764,[1,765,766,768]);
__d(function(g,r,i,a,m,e,d){var n=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n){return t.default.useEffect(()=>{console.warn("DateTimePicker is not supported on: web")},[]),null};var t=n(r(d[1]));n(r(d[2]))},765,[1,14,83]);
__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createNeutralEvtParams=e.createDismissEvtParams=e.createDateTimeSetEvtParams=void 0;var t=r(d[0]);e.createDateTimeSetEvtParams=(s,E)=>[{type:t.EVENT_TYPE_SET,nativeEvent:{timestamp:s.getTime(),utcOffset:E}},s];e.createDismissEvtParams=(s,E)=>[{type:t.ANDROID_EVT_TYPE.dismissed,nativeEvent:{timestamp:s.getTime(),utcOffset:E}},s];e.createNeutralEvtParams=(s,E)=>[{type:t.ANDROID_EVT_TYPE.neutralButtonPressed,nativeEvent:{timestamp:s.getTime(),utcOffset:E}},s]},766,[767]);
__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.WINDOWS_MODE=e.TIME_SET_ACTION=e.NEUTRAL_BUTTON_ACTION=e.MIN_MS=e.IOS_MODE=e.IOS_DISPLAY=e.EVENT_TYPE_SET=e.EVENT_TYPE_DISMISSED=e.DISMISS_ACTION=e.DAY_OF_WEEK=e.DATE_SET_ACTION=e.ANDROID_MODE=e.ANDROID_EVT_TYPE=e.ANDROID_DISPLAY=void 0;e.MIN_MS=6e4,e.ANDROID_DISPLAY=Object.freeze({default:'default',spinner:'spinner',clock:'clock',calendar:'calendar'});const t=e.EVENT_TYPE_SET='set',_=e.EVENT_TYPE_DISMISSED='dismissed',E=(e.ANDROID_EVT_TYPE=Object.freeze({set:t,dismissed:_,neutralButtonPressed:'neutralButtonPressed'}),e.IOS_DISPLAY=Object.freeze({default:'default',spinner:'spinner',compact:'compact',inline:'inline'}),Object.freeze({date:'date',time:'time'}));e.ANDROID_MODE=E,e.WINDOWS_MODE=E,e.IOS_MODE=Object.freeze(Object.assign({},E,{datetime:'datetime',countdown:'countdown'})),e.DAY_OF_WEEK=Object.freeze({Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6}),e.DATE_SET_ACTION='dateSetAction',e.TIME_SET_ACTION='timeSetAction',e.DISMISS_ACTION='dismissedAction',e.NEUTRAL_BUTTON_ACTION='neutralButtonAction'},767,[]);
__d(function(g,r,i,a,m,e,d){var o=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.DateTimePickerAndroid=void 0;o(r(d[1]));const n=()=>{console.warn("DateTimePickerAndroid is not supported on: web")};e.DateTimePickerAndroid={open:n,dismiss:n}},768,[1,83]);
__d(function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=function({route:e,navigation:o}){const{show:C}=e.params,[T,B]=(0,t.useState)(C),[I,S]=(0,t.useState)([]),[k,v]=(0,t.useState)(!1),[z,W]=(0,t.useState)(!1),[D,A]=(0,t.useState)(null),[P,M]=(0,t.useState)(''),[R,$]=(0,t.useState)(!1),[V,_]=(0,t.useState)(!1),[E,L]=(0,t.useState)(!1);(0,t.useEffect)(()=>{H()},[]);const H=async()=>{v(!0);try{const[e,t]=await Promise.all([(0,b.listVendors)(),(0,b.listDirectorShows)()]);S(e);const a=t.find(e=>e.id===T.id);a&&B(a)}catch(e){console.error(e)}finally{v(!1)}},N=e=>{A(e),M(''),W(!0)},O=T.insights?.actores?.map(e=>e.id)||[],q=I.filter(e=>!O.includes(e.cedula)),F=async e=>{i.default.alert('Confirmar Cobro',`\xbfMarcar como PAGADAS todas las entradas vendidas por ${e.nombre}?`,[{text:'Cancelar',style:'cancel'},{text:'Confirmar',onPress:async()=>{_(!0);try{const t=await(0,b.markTicketsAsPaid)({showId:T.id,actorId:e.id});i.default.alert('\xc9xito',`Se cobraron ${t} entradas`),H()}catch(e){i.default.alert('Error',e.message)}finally{_(!1)}}}])};if(!T)return(0,p.jsx)(h.default,{children:(0,p.jsx)(f.default,{color:y.default.secondary,size:"large",style:{marginTop:50}})});return(0,p.jsxs)(h.default,{children:[(0,p.jsxs)(a.default,{style:w.header,children:[(0,p.jsx)(r.default,{onPress:()=>o.goBack(),children:(0,p.jsx)(j.Ionicons,{name:"arrow-back",size:24,color:y.default.white})}),(0,p.jsx)(l.default,{style:w.headerTitle,children:"Detalle de Funci\xf3n"}),(0,p.jsx)(r.default,{onPress:async()=>{try{const e=`https://baco-teatro.app/invitacion/${T.id}`;await c.default.share({message:`\xa1Te invito a ver ${T.obra}!\nFecha: ${new Date(T.fecha).toLocaleString()}\nReserva tu entrada aqu\xed: ${e}`})}catch(e){i.default.alert(e.message)}},children:(0,p.jsx)(j.Ionicons,{name:"share-social-outline",size:24,color:y.default.secondary})})]}),(0,p.jsxs)(x.default,{title:T.obra,children:[(0,p.jsxs)(l.default,{style:w.showId,children:["ID: ",T.id]}),(0,p.jsxs)(l.default,{style:w.showMeta,children:[new Date(T.fecha).toLocaleDateString()," ",new Date(T.fecha).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})," hs"]}),(0,p.jsx)(l.default,{style:w.showMeta,children:T.lugar}),(0,p.jsx)(a.default,{style:w.capacityBadge,children:(0,p.jsxs)(l.default,{style:w.capacityText,children:["Capacidad: ",T.capacidad]})})]}),(0,p.jsxs)(a.default,{style:w.sectionHeader,children:[(0,p.jsx)(l.default,{style:w.sectionTitle,children:"Elenco y Ventas"}),(0,p.jsxs)(r.default,{style:w.addButton,onPress:()=>L(!0),children:[(0,p.jsx)(j.Ionicons,{name:"person-add",size:18,color:y.default.black}),(0,p.jsx)(l.default,{style:w.addButtonText,children:"Agregar"})]})]}),T.insights?.actores?.map(e=>e?(0,p.jsxs)(a.default,{style:w.actorCard,children:[(0,p.jsxs)(a.default,{style:w.actorHeader,children:[(0,p.jsxs)(a.default,{style:w.actorInfo,children:[(0,p.jsx)(l.default,{style:w.actorName,children:e.nombre||'Actor'}),(0,p.jsxs)(l.default,{style:w.actorId,children:["ID: ",e.id]})]}),(0,p.jsxs)(a.default,{style:{flexDirection:'row',gap:8},children:[e.vendidas>0&&(0,p.jsxs)(r.default,{style:[w.assignButton,{backgroundColor:y.default.success}],onPress:()=>F(e),disabled:V,children:[(0,p.jsx)(j.Ionicons,{name:"cash-outline",size:20,color:y.default.black}),(0,p.jsx)(l.default,{style:w.assignButtonText,children:"Cobrar"})]}),(0,p.jsxs)(r.default,{style:w.assignButton,onPress:()=>N(e),children:[(0,p.jsx)(j.Ionicons,{name:"ticket-outline",size:20,color:y.default.black}),(0,p.jsx)(l.default,{style:w.assignButtonText,children:"Dar Entradas"})]})]})]}),(0,p.jsxs)(a.default,{style:w.statsRow,children:[(0,p.jsxs)(a.default,{style:w.statItem,children:[(0,p.jsx)(l.default,{style:w.statLabel,children:"Stock"}),(0,p.jsx)(l.default,{style:w.statValue,children:e.stock||0})]}),(0,p.jsxs)(a.default,{style:w.statItem,children:[(0,p.jsx)(l.default,{style:w.statLabel,children:"Vendidas"}),(0,p.jsx)(l.default,{style:w.statValue,children:e.vendidas||0})]}),(0,p.jsxs)(a.default,{style:w.statItem,children:[(0,p.jsx)(l.default,{style:w.statLabel,children:"Pagadas"}),(0,p.jsx)(l.default,{style:w.statValue,children:e.pagadas||0})]}),(0,p.jsxs)(a.default,{style:w.statItem,children:[(0,p.jsx)(l.default,{style:w.statLabel,children:"$$$"}),(0,p.jsxs)(l.default,{style:w.statValue,children:["$",e.entregado||0]})]})]}),e.deuda>0&&(0,p.jsxs)(l.default,{style:w.debtWarning,children:["Debe rendir: $",e.deuda]})]},e.id):null),(!T.insights?.actores||0===T.insights.actores.length)&&(0,p.jsx)(l.default,{style:w.emptyText,children:"A\xfan no hay actores asignados a esta funci\xf3n."}),(0,p.jsx)(n.default,{transparent:!0,visible:z,onRequestClose:()=>W(!1),animationType:"fade",children:(0,p.jsx)(a.default,{style:w.modalOverlay,children:(0,p.jsxs)(a.default,{style:w.modalContent,children:[(0,p.jsx)(l.default,{style:w.modalTitle,children:"Asignar Entradas"}),(0,p.jsxs)(l.default,{style:w.modalSubtitle,children:["Para: ",D?.nombre]}),(0,p.jsx)(l.default,{style:w.label,children:"Cantidad"}),(0,p.jsx)(s.default,{style:w.input,placeholder:"Ej: 10",placeholderTextColor:y.default.textSoft,keyboardType:"numeric",value:P,onChangeText:M,autoFocus:!0}),(0,p.jsxs)(a.default,{style:w.modalButtons,children:[(0,p.jsx)(r.default,{style:[w.modalBtn,w.cancelBtn],onPress:()=>W(!1),children:(0,p.jsx)(l.default,{style:w.cancelText,children:"Cancelar"})}),(0,p.jsx)(r.default,{style:[w.modalBtn,w.confirmBtn],onPress:async()=>{if(P&&!isNaN(P)){$(!0);try{await(0,b.assignTicketsToActor)({showId:T.id,actorId:D.cedula||D.id,cantidad:Number(P)}),i.default.alert('\xc9xito',`Se asignaron ${P} entradas a ${D.nombre}`),W(!1),H()}catch(e){i.default.alert('Error',e.message)}finally{$(!1)}}},disabled:R,children:R?(0,p.jsx)(f.default,{color:y.default.black}):(0,p.jsx)(l.default,{style:w.confirmText,children:"Asignar"})})]})]})})}),(0,p.jsx)(n.default,{transparent:!0,visible:E,onRequestClose:()=>L(!1),animationType:"slide",children:(0,p.jsx)(a.default,{style:w.modalOverlay,children:(0,p.jsxs)(a.default,{style:w.modalContent,children:[(0,p.jsx)(l.default,{style:w.modalTitle,children:"Agregar Actor"}),(0,p.jsx)(u.default,{data:q,keyExtractor:e=>e.cedula,renderItem:({item:e})=>(0,p.jsxs)(r.default,{style:w.vendorItem,onPress:()=>(N(e),void L(!1)),children:[(0,p.jsx)(l.default,{style:w.vendorName,children:e.nombre}),(0,p.jsx)(j.Ionicons,{name:"add-circle-outline",size:24,color:y.default.secondary})]}),ListEmptyComponent:(0,p.jsx)(l.default,{style:w.emptyText,children:"No hay m\xe1s vendedores disponibles."})}),(0,p.jsx)(r.default,{style:w.closeBtn,onPress:()=>L(!1),children:(0,p.jsx)(l.default,{style:w.closeText,children:"Cerrar"})})]})})})]})};var t=(function(e,t){if("function"==typeof WeakMap)var a=new WeakMap,l=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var o,r,n={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return n;if(o=t?l:a){if(o.has(e))return o.get(e);o.set(e,n)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((r=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?o(n,t,r):n[t]=e[t]);return n})(e,t)})(_r(d[1])),a=e(_r(d[2])),l=e(_r(d[3])),o=e(_r(d[4])),r=e(_r(d[5])),n=(e(_r(d[6])),e(_r(d[7])),e(_r(d[8]))),s=e(_r(d[9])),i=e(_r(d[10])),c=e(_r(d[11])),u=e(_r(d[12])),f=e(_r(d[13])),h=e(_r(d[14])),x=e(_r(d[15])),y=e(_r(d[16])),b=_r(d[17]),j=_r(d[18]),p=_r(d[19]);const w=o.default.create({header:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',marginBottom:20},headerTitle:{fontSize:20,fontWeight:'bold',color:y.default.white},showId:{color:y.default.secondary,fontWeight:'bold',marginBottom:4},showMeta:{color:y.default.textMuted,fontSize:16,marginBottom:2},capacityBadge:{backgroundColor:y.default.surfaceAlt,alignSelf:'flex-start',paddingHorizontal:10,paddingVertical:4,borderRadius:8,marginTop:8},capacityText:{color:y.default.white,fontSize:12},sectionHeader:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',marginTop:20,marginBottom:10},sectionTitle:{fontSize:18,fontWeight:'bold',color:y.default.white},addButton:{flexDirection:'row',backgroundColor:y.default.secondary,paddingHorizontal:12,paddingVertical:6,borderRadius:16,alignItems:'center',gap:4},addButtonText:{color:y.default.black,fontWeight:'bold',fontSize:12},actorCard:{backgroundColor:y.default.surface,borderRadius:12,padding:12,marginBottom:10,borderWidth:1,borderColor:y.default.border},actorHeader:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',marginBottom:12},actorName:{color:y.default.white,fontWeight:'bold',fontSize:16},actorId:{color:y.default.textMuted,fontSize:12},assignButton:{flexDirection:'row',backgroundColor:y.default.secondary,paddingHorizontal:10,paddingVertical:6,borderRadius:8,alignItems:'center',gap:4},assignButtonText:{color:y.default.black,fontWeight:'600',fontSize:12},statsRow:{flexDirection:'row',justifyContent:'space-between',backgroundColor:y.default.surfaceAlt,padding:8,borderRadius:8},statItem:{alignItems:'center'},statLabel:{color:y.default.textMuted,fontSize:10},statValue:{color:y.default.white,fontWeight:'bold',fontSize:14},debtWarning:{color:y.default.error,fontSize:12,fontWeight:'bold',marginTop:8,textAlign:'right'},emptyText:{color:y.default.textMuted,textAlign:'center',marginTop:20},modalOverlay:{flex:1,backgroundColor:'rgba(0,0,0,0.8)',justifyContent:'center',padding:20},modalContent:{backgroundColor:y.default.surfaceAlt,borderRadius:20,padding:24,borderWidth:1,borderColor:y.default.border,maxHeight:'80%'},modalTitle:{fontSize:20,fontWeight:'bold',color:y.default.text,marginBottom:4,textAlign:'center'},modalSubtitle:{color:y.default.textMuted,textAlign:'center',marginBottom:20},label:{color:y.default.secondary,marginBottom:8,fontWeight:'600'},input:{backgroundColor:y.default.background,borderRadius:8,borderWidth:1,borderColor:y.default.border,padding:12,color:y.default.text,marginBottom:20},modalButtons:{flexDirection:'row',gap:12},modalBtn:{flex:1,padding:14,borderRadius:12,alignItems:'center'},cancelBtn:{borderWidth:1,borderColor:y.default.textMuted},confirmBtn:{backgroundColor:y.default.secondary},cancelText:{color:y.default.textMuted,fontWeight:'600'},confirmText:{color:y.default.black,fontWeight:'bold'},vendorItem:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',paddingVertical:16,borderBottomWidth:1,borderBottomColor:y.default.border},vendorName:{color:y.default.white,fontSize:16},closeBtn:{marginTop:20,alignItems:'center'},closeText:{color:y.default.textMuted}})},769,[1,14,155,292,27,532,241,283,678,325,537,673,233,355,533,660,535,349,538,352]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=function(){const[e,o]=(0,s.useCameraPermissions)(),[p,j]=(0,t.useState)(''),[k,C]=(0,t.useState)(null),[v,S]=(0,t.useState)(!1);if((0,t.useEffect)(()=>{e&&'undetermined'===e.status&&o()},[e]),!e)return(0,h.jsx)(r.default,{});if(!e.granted)return(0,h.jsx)(c.default,{children:(0,h.jsxs)(u.default,{title:"Permiso de c\xe1mara",children:[(0,h.jsx)(l.default,{style:y.meta,children:"Necesitamos permiso para usar la c\xe1mara y escanear entradas."}),(0,h.jsx)(n.default,{style:y.button,onPress:o,children:(0,h.jsx)(l.default,{style:y.buttonText,children:"Dar permiso"})})]})});const B=async e=>{S(!0);try{const t=await(0,x.validateTicket)(e);C(t),t.ok||alert(`Ticket rechazado: ${t.message||'Motivo no especificado'}`)}catch(e){alert(`Error: ${e.message||'No se pudo validar'}`)}};return(0,h.jsxs)(c.default,{children:[(0,h.jsxs)(u.default,{title:"Escanear QR",subtitle:"Apunta la c\xe1mara al c\xf3digo",children:[(0,h.jsxs)(r.default,{style:y.scannerContainer,children:[(0,h.jsx)(s.CameraView,{style:y.camera,facing:"back",onBarcodeScanned:v?void 0:({data:e})=>{v||B(e)},barcodeScannerSettings:{barcodeTypes:["qr"]}}),v&&(0,h.jsx)(r.default,{style:y.overlay,children:(0,h.jsx)(n.default,{style:y.scanAgainButton,onPress:()=>{S(!1),C(null),j('')},children:(0,h.jsx)(l.default,{style:y.scanAgainText,children:"Escanear otro"})})})]}),(0,h.jsx)(l.default,{style:y.label,children:"O ingresa el c\xf3digo manual:"}),(0,h.jsxs)(r.default,{style:y.inputRow,children:[(0,h.jsx)(i.default,{style:y.input,placeholder:"C\xf3digo...",placeholderTextColor:f.default.textSoft,value:p,onChangeText:j}),(0,h.jsx)(n.default,{style:y.validateButton,onPress:()=>B(p),children:(0,h.jsx)(l.default,{style:y.validateButtonText,children:"Validar"})})]})]}),k&&(0,h.jsxs)(u.default,{title:"Resultado de validaci\xf3n",children:[(0,h.jsxs)(r.default,{style:[y.resultBox,k.ok?y.successBox:y.errorBox],children:[(0,h.jsx)(l.default,{style:y.resultEmoji,children:k.ok?'\u2705':'\u274c'}),(0,h.jsx)(l.default,{style:y.resultTitle,children:k.ok?'APROBADA':'RECHAZADA'})]}),k.ticket?(0,h.jsxs)(r.default,{style:y.ticketDetails,children:[(0,h.jsx)(l.default,{style:y.ticketObra,children:k.ticket.obra}),(0,h.jsx)(l.default,{style:y.ticketDate,children:new Date(k.ticket.fecha).toLocaleString()}),(0,h.jsx)(r.default,{style:y.pillContainer,children:(0,h.jsx)(b.default,{estado:k.ticket.estado})}),(0,h.jsxs)(l.default,{style:y.ticketActor,children:["Vendedor: ",k.ticket.vendedor_nombre||'Sin asignar']})]}):null,(0,h.jsx)(l.default,{style:y.resultMessage,children:k.message})]})]})};var t=(function(e,t){if("function"==typeof WeakMap)var r=new WeakMap,l=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var o,n,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(o=t?l:r){if(o.has(e))return o.get(e);o.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((n=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(n.get||n.set)?o(i,t,n):i[t]=e[t]);return i})(e,t)})(_r(d[1])),r=e(_r(d[2])),l=e(_r(d[3])),o=e(_r(d[4])),n=e(_r(d[5])),i=e(_r(d[6])),s=(e(_r(d[7])),e(_r(d[8])),_r(d[9])),c=e(_r(d[10])),u=e(_r(d[11])),f=e(_r(d[12])),x=_r(d[13]),b=e(_r(d[14])),h=_r(d[15]);const y=o.default.create({meta:{color:f.default.textMuted,marginBottom:10},scannerContainer:{height:300,borderRadius:16,overflow:'hidden',marginBottom:20,backgroundColor:'#000',position:'relative'},camera:{flex:1},overlay:Object.assign({},o.default.absoluteFillObject,{backgroundColor:'rgba(0,0,0,0.6)',justifyContent:'center',alignItems:'center'}),scanAgainButton:{backgroundColor:f.default.primary,paddingHorizontal:24,paddingVertical:12,borderRadius:30},scanAgainText:{color:f.default.black,fontWeight:'bold',fontSize:16},label:{color:f.default.text,marginBottom:8,fontWeight:'600'},inputRow:{flexDirection:'row',gap:10},input:{flex:1,backgroundColor:f.default.surface,borderRadius:12,borderWidth:1,borderColor:f.default.border,padding:12,color:f.default.text,fontSize:16},validateButton:{backgroundColor:f.default.secondary,borderRadius:12,paddingHorizontal:20,justifyContent:'center',alignItems:'center'},validateButtonText:{color:f.default.black,fontWeight:'bold'},button:{backgroundColor:f.default.primary,padding:15,borderRadius:10,alignItems:'center'},buttonText:{color:f.default.black,fontWeight:'bold'},resultBox:{flexDirection:'row',alignItems:'center',justifyContent:'center',padding:15,borderRadius:12,marginBottom:15},successBox:{backgroundColor:'rgba(76, 175, 80, 0.2)',borderWidth:1,borderColor:'#4CAF50'},errorBox:{backgroundColor:'rgba(244, 67, 54, 0.2)',borderWidth:1,borderColor:'#F44336'},resultEmoji:{fontSize:24,marginRight:10},resultTitle:{color:f.default.white,fontWeight:'900',fontSize:20,letterSpacing:1},ticketDetails:{backgroundColor:f.default.surface,padding:15,borderRadius:12,gap:8},ticketObra:{color:f.default.primary,fontSize:18,fontWeight:'bold'},ticketDate:{color:f.default.text,fontSize:14},pillContainer:{alignItems:'flex-start',marginVertical:4},ticketActor:{color:f.default.textMuted,fontSize:14,fontStyle:'italic'},resultMessage:{color:f.default.textSoft,marginTop:10,textAlign:'center'}})},770,[1,14,155,292,27,532,325,537,83,771,533,660,535,349,743,352]);
__d(function(g,r,i,a,m,e,d){var s=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0});var n={useCameraPermissions:!0,useMicrophonePermissions:!0,scanFromURLAsync:!0,Camera:!0,CameraView:!0};e.Camera=void 0,Object.defineProperty(e,"CameraView",{enumerable:!0,get:function(){return c.default}}),e.scanFromURLAsync=h,e.useMicrophonePermissions=e.useCameraPermissions=void 0;var o=r(d[1]),t=s(r(d[2])),c=s(r(d[3])),u=r(d[4]);async function y(){return t.default.getCameraPermissionsAsync()}async function f(){return t.default.requestCameraPermissionsAsync()}Object.keys(u).forEach(function(s){"default"!==s&&"__esModule"!==s&&(Object.prototype.hasOwnProperty.call(n,s)||s in e&&e[s]===u[s]||Object.defineProperty(e,s,{enumerable:!0,get:function(){return u[s]}}))});e.useCameraPermissions=(0,o.createPermissionHook)({getMethod:y,requestMethod:f});async function P(){return t.default.getMicrophonePermissionsAsync()}async function l(){return t.default.requestMicrophonePermissionsAsync()}e.useMicrophonePermissions=(0,o.createPermissionHook)({getMethod:P,requestMethod:l});async function h(s,n=['qr']){return t.default.scanFromURLAsync(s,n)}e.Camera={getCameraPermissionsAsync:y,requestCameraPermissionsAsync:f,getMicrophonePermissionsAsync:P,requestMicrophonePermissionsAsync:l,scanFromURLAsync:h}},771,[1,543,772,775,773]);
__d(function(g,r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var e=r(d[0]),s=r(d[1]),t=r(d[2]);function n(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);const s=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||function(){const e=new Error('Permission unimplemented');throw e.code=0,e.name='NotAllowedError',e};return new Promise((t,n)=>{s.call(navigator,e,t,n)})}function o({message:e}){return'Permission dismissed'===e?{status:s.PermissionStatus.UNDETERMINED,expires:'never',canAskAgain:!0,granted:!1}:{status:s.PermissionStatus.DENIED,expires:'never',canAskAgain:!0,granted:!1}}async function c(){try{return await n({video:!0}),{status:s.PermissionStatus.GRANTED,expires:'never',canAskAgain:!0,granted:!0}}catch({message:e}){return o({message:e})}}async function u(t){if(!navigator?.permissions?.query)throw new e.UnavailabilityError('expo-camera','navigator.permissions API is not available');try{const{state:e}=await navigator.permissions.query({name:t});switch(e){case'prompt':return{status:s.PermissionStatus.UNDETERMINED,expires:'never',canAskAgain:!0,granted:!1};case'granted':return{status:s.PermissionStatus.GRANTED,expires:'never',canAskAgain:!0,granted:!0};case'denied':return{status:s.PermissionStatus.DENIED,expires:'never',canAskAgain:!0,granted:!1}}}catch(e){if(e instanceof TypeError)return{status:s.PermissionStatus.UNDETERMINED,expires:'never',canAskAgain:!0,granted:!1};throw e}}_e.default={get Type(){return{back:'back',front:'front'}},get FlashMode(){return{on:'on',off:'off',auto:'auto',torch:'torch'}},get AutoFocus(){return{on:'on',off:'off',auto:'auto',singleShot:'singleShot'}},get WhiteBalance(){return{auto:'auto',continuous:'continuous',manual:'manual'}},get VideoQuality(){return{}},get VideoStabilization(){return{}},isAvailableAsync:async()=>(0,t.canGetUserMedia)(),takePicture:async(e,s)=>await s.takePicture(e),async pausePreview(e){await e.pausePreview()},resumePreview:async e=>await e.resumePreview(),async getAvailableCameraTypesAsync(){if(!(0,t.canGetUserMedia)()||!navigator.mediaDevices.enumerateDevices)return[];const e=await navigator.mediaDevices.enumerateDevices();return(await Promise.all([await(0,t.isFrontCameraAvailableAsync)(e)&&'front',await(0,t.isBackCameraAvailableAsync)()&&'back'])).filter(Boolean)},getAvailablePictureSizes:async(e,s)=>await s.getAvailablePictureSizes(e),getPermissionsAsync:async()=>u('camera'),requestPermissionsAsync:async()=>c(),getCameraPermissionsAsync:async()=>u('camera'),requestCameraPermissionsAsync:async()=>c(),getMicrophonePermissionsAsync:async()=>u('microphone'),async requestMicrophonePermissionsAsync(){try{return await n({audio:!0}),{status:s.PermissionStatus.GRANTED,expires:'never',canAskAgain:!0,granted:!0}}catch({message:e}){return o({message:e})}}}},772,[543,773,774]);
__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"PermissionStatus",{enumerable:!0,get:function(){return t.PermissionStatus}});var t=r(d[0])},773,[543]);
__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.canGetUserMedia=u,e.getAnyUserMediaAsync=o,e.getUserMediaAsync=c,e.isBackCameraAvailableAsync=async function(t){return await v(['back','rear'],'environment',t)},e.isFrontCameraAvailableAsync=async function(t){return await v(['front','user','facetime'],'user',t)},e.mountedInstances=void 0,e.requestUserMediaAsync=async function(t,o=!0){if(u())return await s(o,t.audio,t.video);const[c,v]=await n(t);return await s(o,c,v)},e.userMediaRequested=void 0;var t=r(d[0]);e.userMediaRequested=!1,e.mountedInstances=[];async function n(t){const n=t=>({optional:[{sourceId:t}]}),s=t=>{const{deviceId:n}=t;return'string'==typeof n?n:Array.isArray(n)&&n.length>0?n[0]:'object'==typeof n&&n.ideal?n.ideal:null},o=await new Promise(t=>MediaStreamTrack.getSources(n=>t(n)));let c=null,u=null;o.forEach(t=>{'audio'===t.kind?c=t.id:'video'===t.kind&&(u=t.id)});const v=s(t.audioConstraints);v&&(c=v);const l=s(t.videoConstraints);return l&&(u=l),[n(c),n(u)]}async function s(t,n,s){const c={video:void 0===s||s};return t||(c.audio=void 0===n||n),await o(c)}async function o(t,n=!1){try{return await c(Object.assign({},t,{video:n||t.video}))}catch(s){if(!n&&'ConstraintNotSatisfiedError'===s.name)return await o(t,!0);throw s}}async function c(t){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(t);const n=navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia;return new Promise((s,o)=>n.call(navigator,t,s,o))}function u(){return t.Platform.isDOMAvailable&&!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia)}async function v(t,n,s){if(!s){if(!navigator.mediaDevices.enumerateDevices)return null;s=await navigator.mediaDevices.enumerateDevices()}const o=s.filter(t=>'videoinput'===t.kind),[c]=o.filter(n=>t.some(t=>n.label.toLowerCase().includes(t))),[u]=o.filter(t=>{if(!('getCapabilities'in t))return null;const s=t.getCapabilities();return s.facingMode?s.facingMode.find(t=>n):null});return u?.deviceId||c?.deviceId||null}},774,[543]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(d[1]),s=r(d[2]),o=t(r(d[3])),c=t(r(d[4])),l=r(d[5]),u=r(d[6]);const v={};let p=1;function h(t){if(!t||'object'!=typeof t)return{};if(void 0===t.quality&&(t.quality=1),t.mirror&&console.warn('The `mirror` option is deprecated. Please use the `mirror` prop on the `CameraView` instead.'),t.onPictureSaved){const n=p++;v[n]=t.onPictureSaved,t.id=n,t.fastMode=!0}return t}function f(t={}){return t&&'object'==typeof t?(t.mirror&&console.warn('The `mirror` option is deprecated. Please use the `mirror` prop on the `CameraView` instead.'),t):{}}function y({nativeEvent:t}){const{id:n,data:s}=t,o=v[n];o&&(o(s),delete v[n])}class _ extends s.Component{static isModernBarcodeScannerAvailable=c.default.isModernBarcodeScannerAvailable;static async isAvailableAsync(){if(!c.default.isAvailableAsync)throw new n.UnavailabilityError('expo-camera','isAvailableAsync');return await c.default.isAvailableAsync()}static async getAvailableVideoCodecsAsync(){if(!c.default.getAvailableVideoCodecsAsync)throw new n.UnavailabilityError('Camera','getAvailableVideoCodecsAsync');return await c.default.getAvailableVideoCodecsAsync()}async getAvailablePictureSizesAsync(){return await(this._cameraRef.current?.getAvailablePictureSizes())??[]}async resumePreview(){return this._cameraRef.current?.resumePreview()}async pausePreview(){return this._cameraRef.current?.pausePreview()}static ConversionTables=l.ConversionTables;static defaultProps={zoom:0,facing:'back',enableTorch:!1,mode:'picture',flash:'off'};_cameraRef=(0,s.createRef)();_lastEvents={};_lastEventsTimes={};async takePictureAsync(t){const n=h(t);return this._cameraRef.current?.takePicture(n)}static async launchScanner(t){t||(t={barcodeTypes:[]})}static async dismissScanner(){}static onModernBarcodeScanned(t){return c.default.addListener('onModernBarcodeScanned',t)}async recordAsync(t){const n=f(t);return this._cameraRef.current?.record(n)}stopRecording(){this._cameraRef.current?.stopRecording()}_onCameraReady=()=>{this.props.onCameraReady&&this.props.onCameraReady()};_onMountError=({nativeEvent:t})=>{this.props.onMountError&&this.props.onMountError(t)};_onResponsiveOrientationChanged=({nativeEvent:t})=>{this.props.onResponsiveOrientationChanged&&this.props.onResponsiveOrientationChanged(t)};_onObjectDetected=t=>({nativeEvent:n})=>{const{type:s}=n;this._lastEvents[s]&&this._lastEventsTimes[s]&&JSON.stringify(n)===this._lastEvents[s]&&(new Date).getTime()-this._lastEventsTimes[s].getTime()<500||t&&(t(n),this._lastEventsTimes[s]=new Date,this._lastEvents[s]=JSON.stringify(n))};_setReference=t=>{t&&(this._cameraHandle=t)};render(){const t=(0,l.ensureNativeProps)(this.props),n=this.props.onBarcodeScanned?this._onObjectDetected(this.props.onBarcodeScanned):void 0;return(0,u.jsx)(o.default,Object.assign({},t,{ref:this._cameraRef,onCameraReady:this._onCameraReady,onMountError:this._onMountError,onBarcodeScanned:n,onPictureSaved:y,onResponsiveOrientationChanged:this._onResponsiveOrientationChanged}))}}e.default=_},775,[1,543,14,776,772,782,352]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])),o=r(d[2]),c=r(d[3]),s=t(r(d[4])),u=t(r(d[5])),l=t(r(d[6])),v=t(r(d[7])),f=r(d[8]),p=r(d[9]),y=r(d[10]),S=r(d[11]),E=r(d[12]);const R=["facing","poster"],b=(0,c.forwardRef)((t,l)=>{let{facing:b,poster:h}=t,A=(0,n.default)(t,R);const M=(0,c.useRef)(null),w=(0,y.useWebCameraStream)(M,b,A,{onCameraReady(){A.onCameraReady&&A.onCameraReady()},onMountError:A.onMountError}),T=(0,c.useMemo)(()=>Boolean(A.barcodeScannerSettings?.barcodeTypes?.includes('qr')&&!!A.onBarcodeScanned),[A.barcodeScannerSettings?.barcodeTypes,A.onBarcodeScanned]);(0,S.useWebQRScanner)(M,{interval:300,isEnabled:T,captureOptions:{scale:1,isImageMirror:'front'===w.type},onScanned(t){A.onBarcodeScanned&&A.onBarcodeScanned(t)}}),(0,c.useImperativeHandle)(l,()=>({getAvailablePictureSizes:async()=>p.PictureSizes,async takePicture(t){if(!M.current||M.current?.readyState!==M.current?.HAVE_ENOUGH_DATA)throw new o.CodedError('ERR_CAMERA_NOT_READY','HTMLVideoElement does not have enough camera data to construct an image yet.');const n=w.mediaTrackSettings;if(!n)throw new o.CodedError('ERR_CAMERA_NOT_READY','MediaStream is not ready yet.');return(0,f.capture)(M.current,n,Object.assign({},t,{onPictureSaved(n){t.onPictureSaved&&t.onPictureSaved(n),A.onPictureSaved&&A.onPictureSaved({nativeEvent:{data:n,id:-1}})}}))},async resumePreview(){M.current&&M.current.play()},async pausePreview(){M.current&&M.current.pause()}}),[w.mediaTrackSettings,A.onPictureSaved]);const C=(0,c.useMemo)(()=>{const t=w.type===v.default.Type.front;return[s.default.absoluteFill,_.video,{transform:t?[{scaleX:-1}]:void 0}]},[w.type]);return(0,E.jsxs)(u.default,{pointerEvents:"box-none",style:[_.videoWrapper,A.style],children:[(0,E.jsx)(P,{autoPlay:!0,playsInline:!0,muted:!0,poster:h,pointerEvents:A.pointerEvents,ref:M,style:C}),A.children]})});e.default=b;const P=(0,c.forwardRef)((t,n)=>(0,l.default)('video',Object.assign({},t,{ref:n}))),_=s.default.create({videoWrapper:{flex:1,alignItems:'stretch'},video:{width:'100%',height:'100%',objectFit:'cover'}})},776,[1,28,543,14,27,155,156,772,777,779,780,781,352]);
__d(function(g,_r,_i,_a,m,_e,d){var t=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.capture=function(t,e,n){const i=p(t,n),o={uri:i,base64:i,width:0,height:0};if(e){const{width:t=0,height:n=0}=e;o.width=t,o.height=n,o.exif=e}n.onPictureSaved&&n.onPictureSaved(o);return o},_e.captureImage=p,_e.captureImageContext=f,_e.captureImageData=function(t,e={}){if(!t||t.readyState!==t.HAVE_ENOUGH_DATA)return null;const n=f(t,e),i=n.getContext('2d',{alpha:!1});if(!i||!n.width||!n.height)return null;return i.getImageData(0,0,n.width,n.height)},_e.compareStreams=function(t,e){if(!t||!e)return!1;const n=t.getTracks()[0].getSettings(),i=e.getTracks()[0].getSettings();return n.deviceId===i.deviceId},_e.getIdealConstraints=h,_e.getImageSize=a,_e.getPreferredStreamDevice=async function(t,e,n){try{return await l(t,e,n)}catch(i){if(i instanceof OverconstrainedError&&'facingMode'===i.constraint){const i='back'===t?'front':'back';return await l(i,e,n)}throw i}},_e.getStreamDevice=l,_e.hasValidConstraints=c,_e.isCapabilityAvailable=function(t,e){const n=t.srcObject;if(n instanceof MediaStream){const t=n.getVideoTracks()[0];return t.getCapabilities?.()?.[e]}return!1},_e.isWebKit=v,_e.setVideoSource=function(t,e){const n=window.URL.createObjectURL??window.webkitURL.createObjectURL;void 0!==t.srcObject?t.srcObject=e:void 0!==t.mozSrcObject?t.mozSrcObject=e:e&&n&&(t.src=n(e));if(!e){const e=window.URL.revokeObjectURL??window.webkitURL.revokeObjectURL,n=t.src??t.srcObject??t.mozSrcObject;e&&'string'==typeof n&&e(n)}},_e.stopMediaStream=function(t){if(!t)return;t.getAudioTracks&&t.getAudioTracks().forEach(t=>t.stop());t.getVideoTracks&&t.getVideoTracks().forEach(t=>t.stop());e=t,'function'==typeof e.stop&&t.stop();var e},_e.syncTrackCapabilities=async function(t,e,n={}){e?.getVideoTracks&&await Promise.all(e.getVideoTracks().map(e=>w(t,e,n)))},_e.toDataURL=r;var e=t(_r(d[1])),n=(function(t,e){if("function"==typeof WeakMap)var n=new WeakMap,i=new WeakMap;return(function(t,e){if(!e&&t&&t.__esModule)return t;var o,a,r={__proto__:null,default:t};if(null===t||"object"!=typeof t&&"function"!=typeof t)return r;if(o=e?i:n){if(o.has(t))return o.get(t);o.set(t,r)}for(const e in t)"default"!==e&&{}.hasOwnProperty.call(t,e)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(t,e))&&(a.get||a.set)?o(r,e,a):r[e]=t[e]);return r})(t,e)})(_r(d[2])),i=_r(d[3]),o=_r(d[4]);function a(t,e,n){const i=t*n;return{width:i,height:e/(t/i)}}function r(t,n,o){const a=['png','jpg'];(0,e.default)(a.includes(n),`expo-camera: ${n} is not a valid ImageType. Expected a string from: ${a.join(', ')}`);const r=i.ImageTypeFormat[n];return'jpg'===n?((0,e.default)(o<=1&&o>=0,`expo-camera: ${o} is not a valid image quality. Expected a number from 0...1`),t.toDataURL(r,o)):t.toDataURL(r)}function c(t,e,n){return void 0!==t&&void 0!==e&&void 0!==n}function s(t){const e={scale:1,imageType:'png',isImageMirror:!1};for(const n in t)n in t&&void 0!==t[n]&&n in e&&(e[n]=t[n]);return e}const u=.92;function f(t,{scale:e=1,isImageMirror:n=!1}){const{videoWidth:i,videoHeight:o}=t,{width:r,height:c}=a(i,o,e),s=document.createElement('canvas');s.width=r,s.height=c;const u=s.getContext('2d',{alpha:!1});if(!u)throw new Error('Context is not defined');return n&&u.setTransform(-1,0,0,1,s.width,0),u.drawImage(t,0,0,r,c),s}function p(t,e){const n=s(e),i=f(t,n),{imageType:o,quality:a=u}=n;return r(i,o,a)}function h(t,e,n){const o={audio:!1,video:{}};if(c(t,e,n))return i.MinimumConstraints;const a=navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints?navigator.mediaDevices.getSupportedConstraints():null;if(!(a&&a.facingMode&&a.width&&a.height))return i.MinimumConstraints;if(t&&['front','back'].includes(t)){const e=i.CameraTypeToFacingMode[t];if(v()){const t='user'===e?'exact':'ideal';o.video.facingMode={[t]:e}}else o.video.facingMode={ideal:i.CameraTypeToFacingMode[t]}}var r;return(r=o.video)&&'boolean'!=typeof r.video&&(o.video.width=e,o.video.height=n),o}async function l(t,e,n){const i=h(t,e,n);return await(0,o.requestUserMediaAsync)(i)}function v(){return/WebKit/.test(navigator.userAgent)&&!/Edg/.test(navigator.userAgent)}async function w(t,e,i={}){if('function'!=typeof e.getCapabilities)return;const o=e.getCapabilities(),a={},r=['exposureCompensation','colorTemperature','iso','brightness','contrast','saturation','sharpness','focusDistance','zoom'];for(const t of r)o[t]&&(a[t]=y(o[t],i[t]));function c(e,n,a){return M({constraintKey:e,settingsKey:n,convertedSetting:a(i[n]),capabilities:o,settings:i,cameraType:t})}o.focusMode&&void 0!==i.autoFocus&&(a.focusMode=c('focusMode','autoFocus',n.convertAutoFocusJSONToNative)),o.torch&&void 0!==i.flashMode&&(a.torch=c('torch','flashMode',n.convertFlashModeJSONToNative)),o.whiteBalanceMode&&void 0!==i.whiteBalance&&(a.whiteBalanceMode=c('whiteBalanceMode','whiteBalance',n.convertWhiteBalanceJSONToNative));try{await e.applyConstraints({advanced:[a]})}catch(t){}}function y(t,e){if(!e)return;const n=b(e,[t.min,t.max]);return Math.min(t.max,Math.max(t.min,n))}function b(t,e,n=[0,1]){return(t-n[0])*(e[1]-e[0])/(n[1]-n[0])+e[0]}function M(t){const{constraintKey:e,settingsKey:n,convertedSetting:i,capabilities:o,settings:a,cameraType:r}=t;a[n];if(!Array.isArray(o[e])||!i||o[e].includes(i))return i}},777,[1,332,778,779,774]);
__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.convertAutoFocusJSONToNative=function(t){switch(t){case'on':case'auto':return'continuous';case'off':return'manual';case'singleShot':return'single-shot';default:return}},e.convertFlashModeJSONToNative=function(t){if('torch'===t)return!0;return!1},e.convertWhiteBalanceJSONToNative=function(t){switch(t){case'on':case'auto':return'continuous';case'off':return'none';case'singleShot':return'single-shot';default:return}}},778,[]);
__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.VIDEO_ASPECT_RATIOS=e.PictureSizes=e.MinimumConstraints=e.ImageTypeFormat=e.FacingModeToCameraType=e.CameraTypeToFacingMode=void 0;const n=e.VIDEO_ASPECT_RATIOS={'3840x2160':1.7777777777777777,'1920x1080':1.7777777777777777,'1280x720':1.7777777777777777,'640x480':1.3333333333333333,'352x288':1.2222222222222223};e.PictureSizes=Object.keys(n),e.ImageTypeFormat={jpg:'image/jpeg',png:'image/png'},e.MinimumConstraints={audio:!1,video:!0},e.CameraTypeToFacingMode={front:'user',back:'environment'},e.FacingModeToCameraType={user:'front',environment:'back'}},779,[]);
__d(function(g,_r,_i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.useWebCameraStream=function(n,u,s,{onCameraReady:i,onMountError:f}){const l=e.useRef(!1),p=e.useRef([]),h=e.useRef({autoFocus:'continuous',flashMode:'off',whiteBalance:'continuous',zoom:1}),[y,b]=e.useState(null),M=e.useMemo(()=>y?y.getTracks()[0].getSettings():null,[y]),k=e.useMemo(()=>{if(!M)return null;const{facingMode:e="user"}=M;return r.FacingModeToCameraType[e]},[M]),_=e.useCallback(async()=>{try{return await t.getPreferredStreamDevice(u)}catch(e){return f&&f({nativeEvent:e}),null}},[u,f]),w=e.useCallback(async()=>{const e=await _();return t.compareStreams(e,y)||(p.current.some(t=>t.id===e?.id)||p.current.push(e),b(e),i&&i()),!1},[_,b,i,y,p.current]);return e.useEffect(()=>{l.current||(l.current=!0,w().then(e=>{l.current=e}).catch(()=>{l.current=!1}))},[u]),e.useEffect(()=>{const e={};for(const t of Object.keys(s)){if(!o.includes(t))continue;const r=s[t];r!==h.current[t]&&(e[t]=r)}const r=!!Object.keys(e).length,n=Object.assign({},h.current,e);r&&t.syncTrackCapabilities(u,y,e),h.current=n},[s.autoFocus,s.flashMode,s.exposureCompensation,s.colorTemperature,s.iso,s.brightness,s.contrast,s.saturation,s.sharpness,s.focusDistance,s.whiteBalance,s.zoom]),e.useEffect(()=>{n.current&&t.setVideoSource(n.current,y)},[n.current,y]),e.useEffect(()=>()=>{for(const e of p.current)t.stopMediaStream(e);n.current&&t.setVideoSource(n.current,y)},[]),c(n.current,()=>{t.syncTrackCapabilities(u,y,h.current)}),{type:k,mediaTrackSettings:M}};var e=n(_r(d[0])),t=n(_r(d[1])),r=_r(d[2]);function n(e,t){if("function"==typeof WeakMap)var r=new WeakMap,o=new WeakMap;return(n=function(e,t){if(!t&&e&&e.__esModule)return e;var n,c,u={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return u;if(n=t?o:r){if(n.has(e))return n.get(e);n.set(e,u)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((c=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(c.get||c.set)?n(u,t,c):u[t]=e[t]);return u})(e,t)}const o=['autoFocus','flashMode','exposureCompensation','colorTemperature','iso','brightness','contrast','saturation','sharpness','focusDistance','whiteBalance','zoom'];function c(t,r){e.useEffect(()=>{t&&t.addEventListener('loadedmetadata',()=>{requestAnimationFrame(()=>{r()})})},[t])}},780,[14,777,779]);
__d(function(g,_r,_i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.useWebQRScanner=function(r,{isEnabled:o,captureOptions:s,interval:i,onScanned:c,onError:u}){const f=t.useRef(!1),l=t.useRef(void 0);async function p(){if(f.current&&c)try{const t=(0,e.captureImageData)(r.current,s);if(t){const e=await n(t);e?.data&&c({nativeEvent:e})}}catch(t){u&&u({nativeEvent:t})}finally{if(0===i)return void h();const t=!i||i<0?16:i;l.current=setTimeout(()=>{p()},t)}else h()}function h(){f.current=!1,clearTimeout(l.current)}t.useEffect(()=>(o&&(f.current=!0,p()),()=>{o&&h()}),[o])};var t=(function(t,e){if("function"==typeof WeakMap)var n=new WeakMap,r=new WeakMap;return(function(t,e){if(!e&&t&&t.__esModule)return t;var o,s,i={__proto__:null,default:t};if(null===t||"object"!=typeof t&&"function"!=typeof t)return i;if(o=e?r:n){if(o.has(t))return o.get(t);o.set(t,i)}for(const e in t)"default"!==e&&{}.hasOwnProperty.call(t,e)&&((s=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(t,e))&&(s.get||s.set)?o(i,e,s):i[e]=t[e]);return i})(t,e)})(_r(d[0])),e=_r(d[1]);const n=((t,e)=>{const n=[`self.func = ${t.toString()};`,'self.onmessage = (e) => {','  const result = self.func(e.data);','  self.postMessage(result);','};'];e.length>0&&n.unshift(`importScripts(${e.map(t=>`'${t}'`).join(', ')});`);const r=new Blob(n,{type:'text/javascript'}),o=new Worker(URL.createObjectURL(r)),s=[];return o.onmessage=t=>s.shift()?.resolve(t.data),t=>new Promise((e,n)=>{s.push({resolve:e,reject:n}),o.postMessage(t)})})(({data:t,width:e,height:n})=>{const r=self.jsQR(t,e,n,{inversionAttempts:'attemptBoth'});let o;try{o=JSON.parse(r)}catch{o=r}if(o?.data){const t={type:'qr',data:o.data,cornerPoints:[],bounds:{origin:{x:0,y:0},size:{width:0,height:0}}};return o.location&&(t.cornerPoints=[o.location.topLeftCorner,o.location.bottomLeftCorner,o.location.topRightCorner,o.location.bottomRightCorner]),t}return o},['https://cdn.jsdelivr.net/npm/jsqr@1.2.0/dist/jsQR.min.js'])},781,[14,777]);
__d(function(g,r,i,a,m,e,d){var o=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.ConversionTables=void 0,e.convertNativeProps=s,e.ensureNativeProps=function(o){const n=s(o);return n.barcodeScannerEnabled=!!o?.onBarcodeScanned,n.flashMode=o?.flash??'off',n.mute=o?.mute??!1,n.autoFocus=o?.autofocus??'off',n};r(d[1]);var n=o(r(d[2]));const t=e.ConversionTables={type:n.default.Type,flash:n.default.FlashMode};function s(o){if(!o||'object'!=typeof o)return{};const n={};for(const[s,f]of Object.entries(o))'string'==typeof f&&t[s]?n[s]=t[s][f]:n[s]=f;return n}},782,[1,543,772]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=function(){const[e,l]=(0,t.useState)(null),[p,h]=(0,t.useState)(!0);if((0,t.useEffect)(()=>{(async()=>{try{const e=await(0,f.getDirectorReports)();l(e)}finally{h(!1)}})()},[]),p)return(0,y.jsx)(s.default,{scrollable:!1,children:(0,y.jsx)(r.default,{style:j.center,children:(0,y.jsx)(o.default,{color:i.default.secondary})})});return(0,y.jsxs)(s.default,{children:[(0,y.jsx)(u.default,{title:"Estado por actor",subtitle:"Ventas y deuda",children:(e?.actors||[]).map(e=>(0,y.jsxs)(r.default,{style:j.actorRow,children:[(0,y.jsxs)(r.default,{children:[(0,y.jsx)(n.default,{style:j.actorName,children:e.nombre}),(0,y.jsxs)(n.default,{style:j.meta,children:["Vendidas ",e.vendidas," \xb7 Pagadas ",e.pagadas]})]}),(0,y.jsxs)(r.default,{style:{alignItems:'flex-end'},children:[(0,y.jsxs)(n.default,{style:j.amount,children:["$",e.entregado]}),(0,y.jsxs)(n.default,{style:[j.meta,e.deuda>0&&j.debt],children:["Deuda $",e.deuda]})]})]},e.id))}),(0,y.jsx)(u.default,{title:"Movimientos recientes",subtitle:"Transferencias y reportes",children:(0,y.jsx)(c.default,{events:e?.events||[]})})]})};var t=(function(e,t){if("function"==typeof WeakMap)var r=new WeakMap,n=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var l,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(l=t?n:r){if(l.has(e))return l.get(e);l.set(e,s)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((o=(l=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?l(s,t,o):s[t]=e[t]);return s})(e,t)})(_r(d[1])),r=e(_r(d[2])),n=e(_r(d[3])),l=e(_r(d[4])),o=e(_r(d[5])),s=e(_r(d[6])),u=e(_r(d[7])),c=e(_r(d[8])),i=e(_r(d[9])),f=_r(d[10]),y=_r(d[11]);const j=l.default.create({center:{flex:1,alignItems:'center',justifyContent:'center'},actorRow:{flexDirection:'row',justifyContent:'space-between',paddingVertical:12,borderBottomWidth:1,borderBottomColor:i.default.border},actorName:{color:i.default.white,fontWeight:'700'},meta:{color:i.default.textMuted,fontSize:12},amount:{color:i.default.secondary,fontWeight:'700'},debt:{color:i.default.error}})},783,[1,14,155,292,27,355,533,660,755,535,349,352]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=function(){const[e,r]=(0,t.useState)([]),[j,C]=(0,t.useState)(!0),[T,v]=(0,t.useState)(!1),[B,k]=(0,t.useState)({nombre:'',cedula:'',email:'',telefono:''}),[W,w]=(0,t.useState)(!1),S=async()=>{C(!0);try{const e=await(0,b.listVendors)();r(e)}finally{C(!1)}};(0,t.useEffect)(()=>{S()},[]);const O=e=>{s.default.alert('Eliminar vendedor',`\xbfEst\xe1s seguro de eliminar a ${e.nombre}?`,[{text:'Cancelar',style:'cancel'},{text:'Eliminar',style:'destructive',onPress:async()=>{try{await(0,b.deleteVendor)(e.id),S()}catch(e){s.default.alert('Error',e.message)}}}])};return(0,h.jsxs)(f.default,{children:[(0,h.jsxs)(l.default,{style:p.header,children:[(0,h.jsx)(o.default,{style:p.title,children:"Vendedores"}),(0,h.jsxs)(i.default,{style:p.addButton,onPress:()=>v(!0),children:[(0,h.jsx)(y.Ionicons,{name:"add",size:24,color:x.default.black}),(0,h.jsx)(o.default,{style:p.addButtonText,children:"Nuevo"})]})]}),j?(0,h.jsx)(u.default,{color:x.default.secondary,style:{marginTop:20}}):0===e.length?(0,h.jsx)(o.default,{style:p.emptyText,children:"No hay vendedores registrados"}):e.map(e=>(0,h.jsxs)(l.default,{style:p.card,children:[(0,h.jsx)(l.default,{style:p.avatarContainer,children:(0,h.jsx)(o.default,{style:p.avatarText,children:e.nombre.substring(0,2).toUpperCase()})}),(0,h.jsxs)(l.default,{style:p.infoContainer,children:[(0,h.jsx)(o.default,{style:p.name,children:e.nombre}),(0,h.jsxs)(o.default,{style:p.detail,children:["C.I. ",e.id]}),e.email&&(0,h.jsx)(o.default,{style:p.detail,children:e.email})]}),(0,h.jsx)(i.default,{onPress:()=>O(e),style:p.deleteButton,children:(0,h.jsx)(y.Ionicons,{name:"trash-outline",size:20,color:x.default.error})})]},e.id)),(0,h.jsx)(c.default,{animationType:"slide",transparent:!0,visible:T,onRequestClose:()=>v(!1),children:(0,h.jsx)(l.default,{style:p.modalOverlay,children:(0,h.jsxs)(l.default,{style:p.modalContent,children:[(0,h.jsx)(o.default,{style:p.modalTitle,children:"Registrar Vendedor"}),(0,h.jsx)(o.default,{style:p.label,children:"Nombre completo *"}),(0,h.jsx)(n.default,{style:p.input,placeholder:"Ej: Juan P\xe9rez",placeholderTextColor:x.default.textSoft,value:B.nombre,onChangeText:e=>k(t=>Object.assign({},t,{nombre:e}))}),(0,h.jsx)(o.default,{style:p.label,children:"C\xe9dula (Usuario) *"}),(0,h.jsx)(n.default,{style:p.input,placeholder:"Ej: 12345678",placeholderTextColor:x.default.textSoft,keyboardType:"numeric",value:B.cedula,onChangeText:e=>k(t=>Object.assign({},t,{cedula:e}))}),(0,h.jsx)(o.default,{style:p.label,children:"Email (Opcional)"}),(0,h.jsx)(n.default,{style:p.input,placeholder:"juan@ejemplo.com",placeholderTextColor:x.default.textSoft,keyboardType:"email-address",autoCapitalize:"none",value:B.email,onChangeText:e=>k(t=>Object.assign({},t,{email:e}))}),(0,h.jsx)(o.default,{style:p.label,children:"Tel\xe9fono (Opcional)"}),(0,h.jsx)(n.default,{style:p.input,placeholder:"+598 99 123 456",placeholderTextColor:x.default.textSoft,keyboardType:"phone-pad",value:B.telefono,onChangeText:e=>k(t=>Object.assign({},t,{telefono:e}))}),(0,h.jsxs)(l.default,{style:p.modalButtons,children:[(0,h.jsx)(i.default,{style:[p.modalButton,p.cancelButton],onPress:()=>v(!1),children:(0,h.jsx)(o.default,{style:p.cancelButtonText,children:"Cancelar"})}),(0,h.jsx)(i.default,{style:[p.modalButton,p.saveButton],onPress:async()=>{if(B.nombre&&B.cedula){w(!0);try{await(0,b.createVendor)(B),k({nombre:'',cedula:'',email:'',telefono:''}),v(!1),S(),s.default.alert('\xc9xito','Vendedor registrado correctamente')}catch(e){s.default.alert('Error',e.message||'No se pudo crear el vendedor')}finally{w(!1)}}else s.default.alert('Falta informaci\xf3n','El nombre y la c\xe9dula son obligatorios')},disabled:W,children:W?(0,h.jsx)(u.default,{color:x.default.black}):(0,h.jsx)(o.default,{style:p.saveButtonText,children:"Guardar"})})]})]})})})]})};var t=(function(e,t){if("function"==typeof WeakMap)var l=new WeakMap,o=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var r,n,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(r=t?o:l){if(r.has(e))return r.get(e);r.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((n=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(n.get||n.set)?r(i,t,n):i[t]=e[t]);return i})(e,t)})(_r(d[1])),l=e(_r(d[2])),o=e(_r(d[3])),r=e(_r(d[4])),n=e(_r(d[5])),i=e(_r(d[6])),s=e(_r(d[7])),u=e(_r(d[8])),c=e(_r(d[9])),f=(e(_r(d[10])),e(_r(d[11])),e(_r(d[12])),e(_r(d[13]))),x=(e(_r(d[14])),e(_r(d[15]))),b=_r(d[16]),y=_r(d[17]),h=_r(d[18]);const p=r.default.create({header:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',marginBottom:20,paddingHorizontal:4},title:{fontSize:24,fontWeight:'bold',color:x.default.text},addButton:{flexDirection:'row',backgroundColor:x.default.secondary,paddingHorizontal:16,paddingVertical:8,borderRadius:20,alignItems:'center',gap:4},addButtonText:{color:x.default.black,fontWeight:'bold'},emptyText:{color:x.default.textMuted,textAlign:'center',marginTop:40},card:{flexDirection:'row',backgroundColor:x.default.surface,padding:16,borderRadius:12,marginBottom:12,alignItems:'center',borderWidth:1,borderColor:x.default.border},avatarContainer:{width:40,height:40,borderRadius:20,backgroundColor:x.default.primary,justifyContent:'center',alignItems:'center',marginRight:12},avatarText:{color:x.default.white,fontWeight:'bold'},infoContainer:{flex:1},name:{color:x.default.text,fontWeight:'bold',fontSize:16},detail:{color:x.default.textMuted,fontSize:12},deleteButton:{padding:8},modalOverlay:{flex:1,backgroundColor:'rgba(0,0,0,0.8)',justifyContent:'center',padding:20},modalContent:{backgroundColor:x.default.surfaceAlt,borderRadius:20,padding:24,borderWidth:1,borderColor:x.default.border},modalTitle:{fontSize:20,fontWeight:'bold',color:x.default.text,marginBottom:20,textAlign:'center'},label:{color:x.default.secondary,fontSize:12,marginBottom:6,fontWeight:'600'},input:{backgroundColor:x.default.background,borderRadius:8,borderWidth:1,borderColor:x.default.border,padding:12,color:x.default.text,marginBottom:16},modalButtons:{flexDirection:'row',gap:12,marginTop:10},modalButton:{flex:1,padding:14,borderRadius:12,alignItems:'center'},cancelButton:{backgroundColor:'transparent',borderWidth:1,borderColor:x.default.textMuted},saveButton:{backgroundColor:x.default.secondary},cancelButtonText:{color:x.default.textMuted,fontWeight:'600'},saveButtonText:{color:x.default.black,fontWeight:'bold'}})},784,[1,14,155,292,27,325,532,537,355,678,241,83,764,533,660,535,349,538,352]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=function({navigation:e}){const[n,S]=(0,t.useState)([]),[B,C]=(0,t.useState)([]),[v,T]=(0,t.useState)(!0),[O,D]=(0,t.useState)(!1),[k,M]=(0,t.useState)(!1),[W,z]=(0,t.useState)(!1),[I,P]=(0,t.useState)(!1),[R,_]=(0,t.useState)({title:'',date:new Date,location:'',notes:'',showId:null});(0,t.useEffect)(()=>{E()},[]);const E=async()=>{T(!0);try{const[e,t]=await Promise.all([(0,b.listRehearsals)(),(0,b.listDirectorShows)()]);S(e),C(t)}catch(e){console.error(e)}finally{T(!1)}},H=async e=>{c.default.alert('Confirmar','\xbfBorrar ensayo?',[{text:'Cancelar',style:'cancel'},{text:'Borrar',style:'destructive',onPress:async()=>{try{await(0,b.deleteRehearsal)(e),E()}catch(e){c.default.alert('Error',e.message)}}}])};return(0,p.jsxs)(x.default,{children:[(0,p.jsxs)(o.default,{style:w.header,children:[(0,p.jsx)(l.default,{style:w.title,children:"Ensayos"}),(0,p.jsxs)(s.default,{style:w.addButton,onPress:()=>D(!0),children:[(0,p.jsx)(y.Ionicons,{name:"add",size:24,color:j.default.black}),(0,p.jsx)(l.default,{style:w.addButtonText,children:"Nuevo"})]})]}),v?(0,p.jsx)(f.default,{color:j.default.secondary}):(0,p.jsx)(r.default,{data:n,renderItem:({item:e})=>{const t=B.find(t=>t.id===e.showId);return(0,p.jsxs)(o.default,{style:w.card,children:[(0,p.jsxs)(o.default,{style:w.cardHeader,children:[(0,p.jsx)(l.default,{style:w.cardTitle,children:e.title||'Ensayo'}),(0,p.jsx)(s.default,{onPress:()=>H(e.id),children:(0,p.jsx)(y.Ionicons,{name:"trash-outline",size:20,color:j.default.error})})]}),(0,p.jsx)(l.default,{style:w.cardDate,children:new Date(e.date||e.fecha).toLocaleString()}),(0,p.jsx)(l.default,{style:w.cardLocation,children:e.location||e.lugar}),t&&(0,p.jsxs)(l.default,{style:w.cardShow,children:["Obra: ",t.obra]}),e.notes&&(0,p.jsx)(l.default,{style:w.cardNotes,children:e.notes})]})},keyExtractor:e=>e.id,contentContainerStyle:{paddingBottom:20},ListEmptyComponent:(0,p.jsx)(l.default,{style:w.emptyText,children:"No hay ensayos programados"})}),(0,p.jsx)(i.default,{visible:O,animationType:"slide",transparent:!0,children:(0,p.jsx)(o.default,{style:w.modalContainer,children:(0,p.jsxs)(o.default,{style:w.modalContent,children:[(0,p.jsx)(l.default,{style:w.modalTitle,children:"Nuevo Ensayo"}),(0,p.jsx)(u.default,{style:w.input,placeholder:"Titulo (ej. Lectura)",value:R.title,onChangeText:e=>_(t=>Object.assign({},t,{title:e}))}),(0,p.jsx)(u.default,{style:w.input,placeholder:"Lugar (ej. Sala 1)",value:R.location,onChangeText:e=>_(t=>Object.assign({},t,{location:e}))}),(0,p.jsx)(u.default,{style:w.input,placeholder:"Notas",value:R.notes,onChangeText:e=>_(t=>Object.assign({},t,{notes:e}))}),(0,p.jsx)(l.default,{style:w.label,children:"Fecha y Hora"}),(0,p.jsx)(o.default,{style:w.dateRow,children:(0,p.jsx)("input",{type:"datetime-local",value:R.date.toISOString().slice(0,16),onChange:e=>_(t=>Object.assign({},t,{date:new Date(e.target.value)})),style:{padding:10,borderRadius:8,border:`1px solid ${j.default.border}`,width:'100%',marginBottom:12,fontFamily:'system-ui'}})}),W&&(0,p.jsx)(h.default,{value:R.date,mode:"date",display:"default",onChange:(e,t)=>{if(z(!1),t){const e=new Date(t);e.setHours(R.date.getHours()),e.setMinutes(R.date.getMinutes()),_(t=>Object.assign({},t,{date:e})),setTimeout(()=>P(!0),100)}}}),I&&(0,p.jsx)(h.default,{value:R.date,mode:"time",display:"default",onChange:(e,t)=>{if(P(!1),t){const e=new Date(R.date);e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),_(t=>Object.assign({},t,{date:e}))}}}),(0,p.jsxs)(o.default,{style:w.modalButtons,children:[(0,p.jsx)(s.default,{style:w.cancelButton,onPress:()=>D(!1),children:(0,p.jsx)(l.default,{style:w.cancelButtonText,children:"Cancelar"})}),(0,p.jsx)(s.default,{style:w.saveButton,onPress:async()=>{if(R.title&&R.location){M(!0);try{await(0,b.createRehearsal)(Object.assign({},R,{fecha:R.date.toISOString(),lugar:R.location})),D(!1),_({title:'',date:new Date,location:'',notes:'',showId:null}),E()}catch(e){c.default.alert('Error',e.message)}finally{M(!1)}}else c.default.alert('Error','Titulo y lugar son obligatorios')},disabled:k,children:k?(0,p.jsx)(f.default,{color:j.default.white}):(0,p.jsx)(l.default,{style:w.saveButtonText,children:"Guardar"})})]})]})})})]})};var t=(function(e,t){if("function"==typeof WeakMap)var o=new WeakMap,l=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var n,r,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(n=t?l:o){if(n.has(e))return n.get(e);n.set(e,s)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?n(s,t,r):s[t]=e[t]);return s})(e,t)})(_r(d[1])),o=e(_r(d[2])),l=e(_r(d[3])),n=e(_r(d[4])),r=e(_r(d[5])),s=e(_r(d[6])),i=e(_r(d[7])),u=e(_r(d[8])),c=e(_r(d[9])),f=e(_r(d[10])),y=(e(_r(d[11])),_r(d[12])),h=e(_r(d[13])),x=e(_r(d[14])),j=(e(_r(d[15])),e(_r(d[16]))),b=_r(d[17]),p=_r(d[18]);const w=n.default.create({header:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',marginBottom:20},title:{fontSize:28,fontWeight:'bold',color:j.default.text},addButton:{flexDirection:'row',alignItems:'center',backgroundColor:j.default.primary,padding:8,borderRadius:8},addButtonText:{fontWeight:'bold',marginLeft:4},card:{backgroundColor:j.default.surface,padding:16,borderRadius:12,marginBottom:12,borderWidth:1,borderColor:j.default.border},cardHeader:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',marginBottom:8},cardTitle:{fontSize:18,fontWeight:'bold',color:j.default.text},cardDate:{fontSize:16,color:j.default.secondary,marginBottom:4},cardLocation:{fontSize:14,color:j.default.textMuted,marginBottom:4},cardShow:{fontSize:14,fontWeight:'600',color:j.default.primary,marginBottom:4},cardNotes:{fontSize:14,fontStyle:'italic',color:j.default.textSoft},emptyText:{textAlign:'center',color:j.default.textMuted,marginTop:20},modalContainer:{flex:1,backgroundColor:'rgba(0,0,0,0.5)',justifyContent:'center',padding:20},modalContent:{backgroundColor:j.default.surface,borderRadius:20,padding:20},modalTitle:{fontSize:20,fontWeight:'bold',marginBottom:20,textAlign:'center'},input:{backgroundColor:j.default.background,padding:12,borderRadius:8,marginBottom:12,borderWidth:1,borderColor:j.default.border},label:{fontSize:12,color:j.default.textMuted,marginBottom:4},modalButtons:{flexDirection:'row',justifyContent:'space-between',marginTop:20},cancelButton:{padding:12},cancelButtonText:{color:j.default.error,fontWeight:'bold'},saveButton:{backgroundColor:j.default.primary,paddingVertical:12,paddingHorizontal:24,borderRadius:8},saveButtonText:{color:j.default.black,fontWeight:'bold'}})},785,[1,14,155,292,27,233,532,678,325,537,355,83,538,764,533,660,535,349,352]);